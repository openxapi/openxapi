asyncapi: 3.0.0
info:
  title: Binance COIN-M Margined Futures WebSocket Streams
  version: 2.0.0
  description: |
    AsyncAPI specification for Binance COIN-M Margined Futures WebSocket Streams (Market Data).

    This specification covers:
    1. Market Data Streams: Real-time futures market data without authentication

    ## Connection Types

    ### Single Market Streams
    - Connection: Connect to `/ws/{streamName}` directly (or `/ws` and SUBSCRIBE)
    - Data Format: Direct stream data (not wrapped)
    - Property: `combined = false`
    - Example: `wss://dstream.binance.com/ws/btcusd_perp@aggTrade`

    ### Combined Market Streams (Multiple Streams)
    - Connection: Connect to `/stream?streams=<streamName1>/<streamName2>`
    - Data Format: Wrapped as `{"stream":"<streamName>","data":<rawPayload>}`
    - Property: `combined = true`
    - Max Streams: 1024 streams per connection
    - Example: `wss://dstream.binance.com/stream?streams=btcusd_perp@aggTrade/ethusd_perp@kline_1m`

    ### User Data Streams (Account-Specific, Requires Authentication)
    - Connection: Connect to `/ws/{listenKey}`
    - Data Format: Direct stream data (not wrapped)
    - Listen Key: Obtained from REST API `userDataStream.start` request
    - Validity: 60 minutes, extendable with keepalives

    ## Connection Management

    ### Initial Connection
    - Market Streams: Connect to `/ws/{streamName}` for single streams or `/stream` for combined market streams
    - Use SUBSCRIBE method to add streams dynamically

    ### Heartbeat
    - Server sends ping periodically
    - Client must respond with pong within 1 minute
    - Connection will be disconnected if no pong received

    ### Limits and Validity
    - Connection Validity: up to 24 hours
    - Rate Limit: 10 incoming messages per second
    - Streams per Connection: Maximum 1024 streams (market streams)
    - Connections per IP: Rate limiting applies

    ### Stream Naming Conventions
    - Symbols and stream names are lowercase
    - Multiple streams can be combined in a single connection
    - COIN-M specific streams include index price and mark price klines

servers:
  mainnet:
    host: dstream.binance.com
    protocol: wss
    pathname: /
    title: Binance COIN-M Margined Futures Server
    summary: Binance COIN-M Margined Futures WebSocket Streams Server (Mainnet)
    description: WebSocket server for Binance COIN-M margined futures market data streams (mainnet)

  testnet:
    host: dstream.binancefuture.com
    protocol: wss
    pathname: /
    title: Binance COIN-M Margined Futures Testnet Server
    summary: Binance COIN-M Margined Futures WebSocket Streams Server (Testnet)
    description: WebSocket server for Binance COIN-M margined futures market data streams (testnet)

channels:
  # Single market stream connection (connect to /ws/<streamName> directly)
  marketStream:
    address: /ws/{streamName}
    title: Single Market Streams Connection
    description: |
      Direct connection endpoint for individual market streams. Connect here to receive
      data from a specific stream. Each stream returns direct data.
    parameters:
      streamName:
        description: The specific stream name to connect to
        examples:
          - btcusd_perp@aggTrade
          - btcusd_perp@kline_1m
          - btcusd_perp@markPrice
    messages:
      subscribe:
        $ref: '#/components/messages/subscribeRequest'
      unsubscribe:
        $ref: '#/components/messages/unsubscribeRequest'
      subscribeResponse:
        $ref: '#/components/messages/subscribeResponse'
      unsubscribeResponse:
        $ref: '#/components/messages/unsubscribeResponse'
      listSubscriptions:
        $ref: '#/components/messages/listSubscriptionsRequest'
      listSubscriptionsResponse:
        $ref: '#/components/messages/listSubscriptionsResponse'
      setProperty:
        $ref: '#/components/messages/setPropertyRequest'
      setPropertyResponse:
        $ref: '#/components/messages/setPropertyResponse'
      getProperty:
        $ref: '#/components/messages/getPropertyRequest'
      getPropertyResponse:
        $ref: '#/components/messages/getPropertyResponse'
      error:
        $ref: '#/components/messages/errorMessage'
      # Single stream data messages (direct, not wrapped)
      aggregateTradeEvent:
        $ref: '#/components/messages/aggregateTradeEvent'
      indexPriceEvent:
        $ref: '#/components/messages/indexPriceEvent'
      markPriceEvent:
        $ref: '#/components/messages/markPriceEvent'
      allMarkPricesEvent:
        $ref: '#/components/messages/allMarkPricesEvent'
      klineEvent:
        $ref: '#/components/messages/klineEvent'
      continuousKlineEvent:
        $ref: '#/components/messages/continuousKlineEvent'
      indexKlineEvent:
        $ref: '#/components/messages/indexKlineEvent'
      markPriceKlineEvent:
        $ref: '#/components/messages/markPriceKlineEvent'
      miniTickerEvent:
        $ref: '#/components/messages/miniTickerEvent'
      allMiniTickersEvent:
        $ref: '#/components/messages/allMiniTickersEvent'
      tickerEvent:
        $ref: '#/components/messages/tickerEvent'
      allTickersEvent:
        $ref: '#/components/messages/allTickersEvent'
      bookTickerEvent:
        $ref: '#/components/messages/bookTickerEvent'
      allBookTickersEvent:
        $ref: '#/components/messages/allBookTickersEvent'
      liquidationEvent:
        $ref: '#/components/messages/liquidationEvent'
      allLiquidationsEvent:
        $ref: '#/components/messages/allLiquidationsEvent'
      contractInfoEvent:
        $ref: '#/components/messages/contractInfoEvent'
      partialDepthEvent:
        $ref: '#/components/messages/partialDepthEvent'
      diffDepthEvent:
        $ref: '#/components/messages/diffDepthEvent'

  # Combined stream connection (connect to /stream?streams=...)
  combinedMarketStream:
    address: /stream?streams={streams}
    title: Combined Market Streams Connection
    description: |
      Initial connection endpoint for combined market streams. Connect here first, then use
      query parameters or SUBSCRIBE method to add multiple streams. Each stream returns wrapped data
      with format: {"stream":"<streamName>","data":<rawPayload>}
    x-unwrapped-event-messages:
      - aggregateTradeEvent
      - indexPriceEvent
      - markPriceEvent
      - allMarkPricesEvent
      - klineEvent
      - continuousKlineEvent
      - indexKlineEvent
      - markPriceKlineEvent
      - miniTickerEvent
      - allMiniTickersEvent
      - tickerEvent
      - allTickersEvent
      - bookTickerEvent
      - allBookTickersEvent
      - liquidationEvent
      - allLiquidationsEvent
      - contractInfoEvent
      - partialDepthEvent
      - diffDepthEvent
    parameters:
      streams:
        description: |
          Slash-separated list of stream names to subscribe on connect.
          Format: `<streamName1>/<streamName2>/<streamName3>`.
        examples:
          - btcusd_perp@aggTrade/ethusd_perp@kline_1m
          - btcusd_perp@markPrice/!miniTicker@arr
          - BTCUSD_PERPETUAL@continuousKline_1m/btcusd_perp@depth5@100ms
    messages:
      subscribe:
        $ref: '#/components/messages/subscribeRequest'
      unsubscribe:
        $ref: '#/components/messages/unsubscribeRequest'
      subscribeResponse:
        $ref: '#/components/messages/subscribeResponse'
      unsubscribeResponse:
        $ref: '#/components/messages/unsubscribeResponse'
      listSubscriptions:
        $ref: '#/components/messages/listSubscriptionsRequest'
      listSubscriptionsResponse:
        $ref: '#/components/messages/listSubscriptionsResponse'
      setProperty:
        $ref: '#/components/messages/setPropertyRequest'
      setPropertyResponse:
        $ref: '#/components/messages/setPropertyResponse'
      getProperty:
        $ref: '#/components/messages/getPropertyRequest'
      getPropertyResponse:
        $ref: '#/components/messages/getPropertyResponse'
      error:
        $ref: '#/components/messages/errorMessage'
      # Combined market streams data messages (wrapped format)
      combinedMarketStreamEvent:
        $ref: '#/components/messages/combinedMarketStreamEvent'

  # User data streams connection (connect to /ws/{listenKey})
  userDataStream:
    address: /ws/{listenKey}
    title: User Data Streams Connection
    description: |
      Connection endpoint for user data streams. Connect with a valid listenKey to receive
      account updates, order updates, margin calls and other account-related events.
      The listenKey is obtained from the corresponding REST API and is valid for 60 minutes.
    parameters:
      listenKey:
        description: |
          64-character authentication key for user data stream.
          Obtained from REST API userDataStream.start request.
          Valid for 60 minutes, can be extended with periodic keepalive.
        examples:
          - XaEAKTsQSRLZAGH9tuIu37plSRsdjmlAVBoNYPUITlTAko1WI22PgmBMpI1rS8Yh
          - pqia91ma19a5s61cv6a81va65sdf19v8a65a1a5s61cv6a81va65sdf19v8a65a1
    messages:
      userDataStreamStartRequest:
        $ref: '#/components/messages/userDataStreamStartRequest'
      userDataStreamStartResponse:
        $ref: '#/components/messages/userDataStreamStartResponse'
      userDataStreamPingRequest:
        $ref: '#/components/messages/userDataStreamPingRequest'
      userDataStreamPingResponse:
        $ref: '#/components/messages/userDataStreamPingResponse'
      userDataStreamStopRequest:
        $ref: '#/components/messages/userDataStreamStopRequest'
      userDataStreamStopResponse:
        $ref: '#/components/messages/userDataStreamStopResponse'
      listenKeyExpiredEvent:
        $ref: '#/components/messages/listenKeyExpiredEvent'
      accountUpdateEvent:
        $ref: '#/components/messages/accountUpdateEvent'
      marginCallEvent:
        $ref: '#/components/messages/marginCallEvent'
      orderTradeUpdateEvent:
        $ref: '#/components/messages/orderTradeUpdateEvent'
      accountConfigUpdateEvent:
        $ref: '#/components/messages/accountConfigUpdateEvent'
      strategyUpdateEvent:
        $ref: '#/components/messages/strategyUpdateEvent'
      gridUpdateEvent:
        $ref: '#/components/messages/gridUpdateEvent'
      error:
        $ref: '#/components/messages/errorMessage'

operations:
  # Single market stream operations
  marketStreamSubscribe:
    title: Subscribe to Single Market Streams
    summary: Subscribe to market streams on single connection
    description: |
      Subscribe to market data streams on single connection. Each stream returns
      direct data without wrapping. Maximum 1024 streams per connection.
    action: send
    x-channel-method: Subscribe
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/subscribe'
    reply:
      channel:
        $ref: '#/channels/marketStream'
      messages:
        - $ref: '#/channels/marketStream/messages/subscribeResponse'

  marketStreamUnsubscribe:
    title: Unsubscribe from Single Market Streams
    summary: Unsubscribe from market streams on single connection
    action: send
    x-channel-method: Unsubscribe
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/unsubscribe'
    reply:
      channel:
        $ref: '#/channels/marketStream'
      messages:
        - $ref: '#/channels/marketStream/messages/unsubscribeResponse'

  marketStreamListSubscriptions:
    title: List Single Stream Subscriptions
    summary: Get list of active single stream subscriptions
    action: send
    x-channel-method: ListSubscriptions
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/listSubscriptions'
    reply:
      channel:
        $ref: '#/channels/marketStream'
      messages:
        - $ref: '#/channels/marketStream/messages/listSubscriptionsResponse'

  marketStreamSetProperty:
    title: Set Property on Single Market Streams
    summary: Set a property on the single market stream connection
    description: |
      Set a property on the single market stream connection. Currently only
      the `combined` property is supported.
    action: send
    x-channel-method: SetProperty
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/setProperty'
    reply:
      channel:
        $ref: '#/channels/marketStream'
      messages:
        - $ref: '#/channels/marketStream/messages/setPropertyResponse'

  marketStreamGetProperty:
    title: Get Property from Single Market Streams
    summary: Get a property from the single market stream connection
    description: |
      Get a property from the single market stream connection. Currently only
      the `combined` property is supported.
    action: send
    x-channel-method: GetProperty
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/getProperty'
    reply:
      channel:
        $ref: '#/channels/marketStream'
      messages:
        - $ref: '#/channels/marketStream/messages/getPropertyResponse'

  marketStreamReceiveEvents:
    title: Receive Single Stream Data
    summary: Receive direct stream data from single connection
    description: |
      Receive market data from subscribed streams. Data is returned directly
      without wrapping.
    action: receive
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/aggregateTradeEvent'
      - $ref: '#/channels/marketStream/messages/indexPriceEvent'
      - $ref: '#/channels/marketStream/messages/markPriceEvent'
      - $ref: '#/channels/marketStream/messages/allMarkPricesEvent'
      - $ref: '#/channels/marketStream/messages/klineEvent'
      - $ref: '#/channels/marketStream/messages/continuousKlineEvent'
      - $ref: '#/channels/marketStream/messages/indexKlineEvent'
      - $ref: '#/channels/marketStream/messages/markPriceKlineEvent'
      - $ref: '#/channels/marketStream/messages/miniTickerEvent'
      - $ref: '#/channels/marketStream/messages/allMiniTickersEvent'
      - $ref: '#/channels/marketStream/messages/tickerEvent'
      - $ref: '#/channels/marketStream/messages/allTickersEvent'
      - $ref: '#/channels/marketStream/messages/bookTickerEvent'
      - $ref: '#/channels/marketStream/messages/allBookTickersEvent'
      - $ref: '#/channels/marketStream/messages/liquidationEvent'
      - $ref: '#/channels/marketStream/messages/allLiquidationsEvent'
      - $ref: '#/channels/marketStream/messages/contractInfoEvent'
      - $ref: '#/channels/marketStream/messages/partialDepthEvent'
      - $ref: '#/channels/marketStream/messages/diffDepthEvent'

  marketStreamReceiveError:
    title: Receive Error Messages from Single Market Streams
    summary: Receive error messages from single market stream connection
    description: Receive error messages in response to invalid requests or other issues.
    action: receive
    channel:
      $ref: '#/channels/marketStream'
    messages:
      - $ref: '#/channels/marketStream/messages/error'

  # Combined stream operations
  combinedMarketStreamSubscribe:
    title: Subscribe to Combined Market Streams
    summary: Subscribe to market streams on combined connection
    description: |
      Subscribe to market data streams on combined connection. Each stream returns
      wrapped data with stream name identifier. Maximum 1024 streams per connection.
    action: send
    x-channel-method: Subscribe
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/subscribe'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStream'
      messages:
        - $ref: '#/channels/combinedMarketStream/messages/subscribeResponse'

  combinedMarketStreamUnsubscribe:
    title: Unsubscribe from Combined Market Streams
    summary: Unsubscribe from market streams on combined connection
    action: send
    x-channel-method: Unsubscribe
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/unsubscribe'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStream'
      messages:
        - $ref: '#/channels/combinedMarketStream/messages/unsubscribeResponse'

  combinedMarketStreamListSubscriptions:
    title: List Combined Stream Subscriptions
    summary: Get list of active combined stream subscriptions
    action: send
    x-channel-method: ListSubscriptions
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/listSubscriptions'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStream'
      messages:
        - $ref: '#/channels/combinedMarketStream/messages/listSubscriptionsResponse'

  combinedMarketStreamSetProperty:
    title: Set Property on Combined Market Streams
    summary: Set a property on the combined market stream connection
    action: send
    x-channel-method: SetProperty
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/setProperty'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStream'
      messages:
        - $ref: '#/channels/combinedMarketStream/messages/setPropertyResponse'

  combinedMarketStreamGetProperty:
    title: Get Property from Combined Market Streams
    summary: Get a property from the combined market stream connection
    action: send
    x-channel-method: GetProperty
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/getProperty'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStream'
      messages:
        - $ref: '#/channels/combinedMarketStream/messages/getPropertyResponse'

  combinedMarketStreamReceiveEvents:
    title: Receive Combined Stream Data
    summary: Receive wrapped stream data from combined connection
    description: |
      Receive market data from subscribed streams. Each message is wrapped with
      stream name and original data: {"stream":"<streamName>","data":<rawPayload>}
    action: receive
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/combinedMarketStreamEvent'

  combinedMarketStreamReceiveError:
    title: Receive Error Messages from Combined Market Streams
    summary: Receive error messages from combined market stream connection
    action: receive
    channel:
      $ref: '#/channels/combinedMarketStream'
    messages:
      - $ref: '#/channels/combinedMarketStream/messages/error'

  # User data stream operations
  userDataStreamStart:
    title: Start User Data Stream
    summary: Start a new listen key or extend existing one
    description: Send a userDataStream.start request on the user data stream connection
    action: send
    x-channel-method: Start
    channel:
      $ref: '#/channels/userDataStream'
    messages:
      - $ref: '#/channels/userDataStream/messages/userDataStreamStartRequest'
    reply:
      channel:
        $ref: '#/channels/userDataStream'
      messages:
        - $ref: '#/channels/userDataStream/messages/userDataStreamStartResponse'

  userDataStreamPing:
    title: Keepalive User Data Stream
    summary: Extend listen key validity
    description: Send a userDataStream.ping request on the user data stream connection
    action: send
    x-channel-method: Ping
    channel:
      $ref: '#/channels/userDataStream'
    messages:
      - $ref: '#/channels/userDataStream/messages/userDataStreamPingRequest'
    reply:
      channel:
        $ref: '#/channels/userDataStream'
      messages:
        - $ref: '#/channels/userDataStream/messages/userDataStreamPingResponse'

  userDataStreamStop:
    title: Close User Data Stream
    summary: Invalidate the current listen key
    description: Send a userDataStream.stop request on the user data stream connection
    action: send
    x-channel-method: Stop
    channel:
      $ref: '#/channels/userDataStream'
    messages:
      - $ref: '#/channels/userDataStream/messages/userDataStreamStopRequest'
    reply:
      channel:
        $ref: '#/channels/userDataStream'
      messages:
        - $ref: '#/channels/userDataStream/messages/userDataStreamStopResponse'

  userDataStreamReceiveEvents:
    title: Receive User Data Stream Events
    summary: Receive account and order events on user data stream
    description: |
      Receive various user data stream events after connecting with a valid listenKey.
      This includes account updates, margin calls, order updates, and strategy/grid updates.
    action: receive
    channel:
      $ref: '#/channels/userDataStream'
    messages:
      - $ref: '#/channels/userDataStream/messages/listenKeyExpiredEvent'
      - $ref: '#/channels/userDataStream/messages/accountUpdateEvent'
      - $ref: '#/channels/userDataStream/messages/marginCallEvent'
      - $ref: '#/channels/userDataStream/messages/orderTradeUpdateEvent'
      - $ref: '#/channels/userDataStream/messages/accountConfigUpdateEvent'
      - $ref: '#/channels/userDataStream/messages/strategyUpdateEvent'
      - $ref: '#/channels/userDataStream/messages/gridUpdateEvent'

  userDataStreamReceiveError:
    title: Receive Error Messages from User Data Streams
    summary: Receive error messages from user data stream connection
    action: receive
    channel:
      $ref: '#/channels/userDataStream'
    messages:
      - $ref: '#/channels/userDataStream/messages/error'

components:
  messages:
    # Control messages
    subscribeRequest:
      name: Subscribe Request
      title: Subscribe to Streams
      summary: Request to subscribe to one or more streams
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscribeRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    unsubscribeRequest:
      name: Unsubscribe Request
      title: Unsubscribe from Streams
      summary: Request to unsubscribe from one or more streams
      contentType: application/json
      payload:
        $ref: '#/components/schemas/unsubscribeRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    subscribeResponse:
      name: Subscription Response
      title: Subscription Response
      summary: Response to subscription request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscribeResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    unsubscribeResponse:
      name: Unsubscribe Response
      title: Unsubscribe Response
      summary: Response to unsubscription request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscribeResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    listSubscriptionsRequest:
      name: List Subscriptions Request
      title: List Active Subscriptions
      summary: Request list of active subscriptions
      contentType: application/json
      payload:
        $ref: '#/components/schemas/listSubscriptionsRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    listSubscriptionsResponse:
      name: List Subscriptions Response
      title: Active Subscriptions List
      summary: List of currently active subscriptions
      contentType: application/json
      payload:
        $ref: '#/components/schemas/listSubscriptionsResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    setPropertyRequest:
      name: Set Property Request
      title: Set Property Request
      summary: Request to set a stream property
      contentType: application/json
      payload:
        $ref: '#/components/schemas/setPropertyRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    setPropertyResponse:
      name: Set Property Response
      title: Set Property Response
      summary: Response to set property request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/setPropertyResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    getPropertyRequest:
      name: Get Property Request
      title: Get Property Request
      summary: Request to get a stream property
      contentType: application/json
      payload:
        $ref: '#/components/schemas/getPropertyRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    getPropertyResponse:
      name: Get Property Response
      title: Get Property Response
      summary: Response to get property request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/getPropertyResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    errorMessage:
      name: Error Message
      title: Error Response
      summary: Error response from server
      x-error: true
      x-handler-key: error
      contentType: application/json
      payload:
        $ref: '#/components/schemas/errorResponse'

    # Stream data messages (raw format)
    aggregateTradeEvent:
      name: Aggregate Trade Event
      title: Aggregate Trade Event
      summary: The Aggregate Trade Streams push market trade information that is aggregated for fills with same price and taking side every 100 milliseconds.
      x-event: true
      x-stream-pattern: ['{symbol}@aggTrade']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusd_perp@aggTrade']
      x-update-speed: ['100ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/aggregateTradeEvent'

    indexPriceEvent:
      name: Index Price Event
      title: Index Price Event
      summary: Index price information for COIN-M futures (pair-based)
      x-event: true
      x-stream-pattern: ['{pair}@indexPrice', '{pair}@indexPrice@{indexPriceInterval}']
      x-stream-params:
        pair:
          $ref: '#/components/schemas/pair'
        indexPriceInterval:
          $ref: '#/components/schemas/indexPriceInterval'
      x-stream-example: ['btcusd@indexPrice', 'btcusd@indexPrice@1s']
      x-update-speed: ['3000ms', '1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/indexPriceEvent'

    markPriceEvent:
      name: Mark Price Event
      title: Mark Price Event
      summary: Mark price information for coin-margined futures
      x-event: true
      x-stream-pattern: ['{symbol}@markPrice', '{symbol}@markPrice@{markPriceInterval}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        markPriceInterval:
          $ref: '#/components/schemas/markPriceInterval'
      x-stream-example: ['btcusd_perp@markPrice', 'btcusd_200626@markPrice@1s']
      x-update-speed: ['3000ms', '1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/markPriceEvent'

    allMarkPricesEvent:
      name: All Mark Prices Event
      title: Mark Price Stream for All market
      summary: Mark Price of All Symbols of a Pair
      x-event: true
      x-response-format: array
      x-event-type: markPriceUpdate
      x-stream-pattern: ['!markPrice@arr', '!markPrice@arr@{markPriceInterval}']
      x-stream-params:
        markPriceInterval:
          $ref: '#/components/schemas/markPriceInterval'
      x-stream-example: ['!markPrice@arr', '!markPrice@arr@3s']
      x-update-speed: ['3000ms', '1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allMarkPricesEvent'

    klineEvent:
      name: Kline Event
      title: Kline Event
      summary: The Kline/Candlestick Stream push updates to the current klines/candlestick every 250 milliseconds (if existing).
      x-event: true
      x-stream-pattern: ['{symbol}@kline_{interval}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['btcusd_200626@kline_1m']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/klineEvent'

    continuousKlineEvent:
      name: Continuous Kline Event
      title: Continuous Contract Kline Event
      summary: Kline update every second
      x-event: true
      x-stream-pattern: ['{pair}_{contractType}@continuousKline_{interval}']
      x-stream-params:
        pair:
          $ref: '#/components/schemas/pair'
        contractType:
          $ref: '#/components/schemas/contractType'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['btcusd_next_quarter@continuousKline_1m']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/continuousKlineEvent'

    indexKlineEvent:
      name: Index Kline Event
      title: Index Kline Event
      summary: Index Kline/Candlestick Streams
      x-event: true
      x-stream-pattern: ['{pair}@indexPriceKline_{interval}']
      x-stream-params:
        pair:
          $ref: '#/components/schemas/pair'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['btcusd@indexPriceKline_1h']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/indexKlineEvent'

    markPriceKlineEvent:
      name: Mark Price Kline Event
      title: Mark Price Kline Event
      summary: Mark Price Kline/Candlestick Streams
      x-event: true
      x-stream-pattern: ['{symbol}@markPriceKline_{interval}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['btcusd_perp@markPriceKline_4h']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/markPriceKlineEvent'

    miniTickerEvent:
      name: Mini Ticker Event
      title: 24hr Mini Ticker Event
      summary: 24hr rolling window mini-ticker statistics for a single symbol. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before.
      x-event: true
      x-stream-pattern: ['{symbol}@miniTicker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusd_perp@miniTicker']
      x-update-speed: ['500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/miniTickerEvent'

    allMiniTickersEvent:
      name: All Mini Tickers Event
      title: All Market Mini Tickers
      summary: Array of 24hr mini ticker stats for all symbols
      x-event: true
      x-response-format: array
      x-event-type: 24hrMiniTicker
      x-stream-pattern: ['!miniTicker@arr']
      x-stream-example: ['!miniTicker@arr']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allMiniTickersEvent'

    tickerEvent:
      name: Ticker Event
      title: 24hr Ticker Event
      summary: 24hr rolling window ticker statistics for a single symbol. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before.
      x-event: true
      x-stream-pattern: ['{symbol}@ticker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusd_perp@ticker']
      x-update-speed: ['500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/tickerEvent'

    allTickersEvent:
      name: All Tickers Event
      title: All Market Tickers
      summary: 24hr rolling window ticker statistics for all symbols. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before. Note that only tickers that have changed will be present in the array.
      x-event: true
      x-response-format: array
      x-event-type: 24hrTicker
      x-stream-pattern: ['!ticker@arr']
      x-stream-example: ['!ticker@arr']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allTickersEvent'

    bookTickerEvent:
      name: Book Ticker Event
      title: Book Ticker Event
      summary: Pushes any update to the best bid or ask's price or quantity in real-time for a specified symbol.
      x-event: true
      x-stream-pattern: ['{symbol}@bookTicker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusd_perp@bookTicker']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/bookTickerEvent'

    allBookTickersEvent:
      name: All Book Tickers Event
      title: All Market Book Tickers
      summary: Pushes any update to the best bid or ask's price or quantity in real-time for all symbols.
      x-event: true
      x-response-format: array
      x-event-type: bookTicker
      x-stream-pattern: ['!bookTicker']
      x-stream-example: ['!bookTicker']
      contentType: application/json
      payload:
        type: array
        items:
          $ref: '#/components/schemas/bookTickerEvent'

    liquidationEvent:
      name: Liquidation Event
      title: Liquidation Order Event
      summary: The Liquidation Order Snapshot Streams push force liquidation order information for specific symbol.
      x-event: true
      x-stream-pattern: ['{symbol}@forceOrder']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusd_perp@forceOrder']
      x-update-speed: ['1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/liquidationEvent'

    allLiquidationsEvent:
      name: All Liquidations Event
      title: All Market Liquidations
      summary: The All Liquidation Order Snapshot Streams push force liquidation order information for all symbols in the market. For each symbolï¼Œonly the latest one liquidation order within 1000ms will be pushed as the snapshot. If no liquidation happens in the interval of 1000ms, no stream will be pushed.
      x-event: true
      x-stream-pattern: ['!forceOrder@arr']
      x-stream-example: ['!forceOrder@arr']
      x-update-speed: ['1000ms']
      contentType: application/json
      payload:
        type: array
        items:
          $ref: '#/components/schemas/liquidationEvent'

    contractInfoEvent:
      name: Contract Info Event
      title: Contract Info Event
      summary: ContractInfo stream pushes when contract info updates(listing/settlement/contract bracket update). bks field only shows up when bracket gets updated.
      x-event: true
      x-stream-pattern: ['!contractInfo']
      x-stream-example: ['!contractInfo']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/contractInfoEvent'

    partialDepthEvent:
      name: Partial Depth Event
      title: Partial Book Depth Event
      summary: Partial book depth information for coin-margined futures
      x-event: true
      x-stream-pattern: ['{symbol}@depth{levels}', '{symbol}@depth{levels}@{speed}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        levels:
          $ref: '#/components/schemas/depthLevels'
        speed:
          $ref: '#/components/schemas/depthSpeed'
      x-stream-example: ['btcusd_perp@depth5@100ms']
      x-update-speed: ['100ms', '250ms', '500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/partialDepthEvent'

    diffDepthEvent:
      name: Diff Depth Event
      title: Depth Update Event
      summary: Order book depth update for coin-margined futures
      x-event: true
      x-stream-pattern: ['{symbol}@depth', '{symbol}@depth@{speed}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        speed:
          $ref: '#/components/schemas/depthSpeed'
      x-stream-example: ['btcusd_perp@depth@100ms']
      x-update-speed: ['100ms', '250ms', '500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/diffDepthEvent'

    # Combined market stream message (wrapped format)
    combinedMarketStreamEvent:
      name: Combined Stream Data Event
      title: Combined Stream Wrapper
      summary: Wrapper for combined stream data (combined connection)
      contentType: application/json
      x-event: true
      x-use-desc-naming: false
      x-wrapper: combined
      x-handler-key: wrap:combined
      x-wrapper-keys:
        stream: stream
        data: data
      payload:
        $ref: '#/components/schemas/combinedMarketStreamEvent'

    # User data stream messages
    listenKeyExpiredEvent:
      name: Listen Key Expired Event
      title: User Data Stream Expired Event
      summary: Sent when the listen key expires
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/listenKeyExpiredEvent'

    accountUpdateEvent:
      name: Account Update Event
      title: Balance and Position Update Event
      summary: Sent when account balance or position changes
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/accountUpdateEvent'

    marginCallEvent:
      name: Margin Call Event
      title: Margin Call Event
      summary: Sent when account is under margin call
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/marginCallEvent'

    orderTradeUpdateEvent:
      name: Order Trade Update Event
      title: Order Update Event
      summary: Orders are updated with orderTradeUpdate event
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/orderTradeUpdateEvent'

    accountConfigUpdateEvent:
      name: Account Configuration Update Event
      title: Account Configuration Update Event
      summary: Sent when account configuration changes (leverage update)
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/accountConfigUpdateEvent'

    strategyUpdateEvent:
      name: Strategy Update Event
      title: Strategy Update Event
      summary: Sent when strategy status changes
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/strategyUpdateEvent'

    gridUpdateEvent:
      name: Grid Update Event
      title: Grid Update Event
      summary: Sent when grid strategy updates
      contentType: application/json
      x-event: true
      payload:
        $ref: '#/components/schemas/gridUpdateEvent'

    # User data stream control messages
    userDataStreamStartRequest:
      name: Start User Data Stream (USER_STREAM) Request
      title: Start User Data Stream (USER_STREAM) Request
      summary: Send a userDataStream.start request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamStartRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    userDataStreamStartResponse:
      name: Start User Data Stream (USER_STREAM) Response
      title: Start User Data Stream (USER_STREAM) Response
      summary: Receive response from userDataStream.start
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamStartResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    userDataStreamPingRequest:
      name: Keepalive User Data Stream (USER_STREAM) Request
      title: Keepalive User Data Stream (USER_STREAM) Request
      summary: Send a userDataStream.ping request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamPingRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    userDataStreamPingResponse:
      name: Keepalive User Data Stream (USER_STREAM) Response
      title: Keepalive User Data Stream (USER_STREAM) Response
      summary: Receive response from userDataStream.ping
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamPingResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    userDataStreamStopRequest:
      name: Close User Data Stream (USER_STREAM) Request
      title: Close User Data Stream (USER_STREAM) Request
      summary: Send a userDataStream.stop request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamStopRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    userDataStreamStopResponse:
      name: Close User Data Stream (USER_STREAM) Response
      title: Close User Data Stream (USER_STREAM) Response
      summary: Receive response from userDataStream.stop
      contentType: application/json
      payload:
        $ref: '#/components/schemas/userDataStreamStopResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

  schemas:
    # Common params
    symbol:
      type: string
      description: Futures contract symbol in lowercase (e.g., btcusd_perp)
    pair:
      type: string
      description: Trading pair (e.g., BTCUSD)
    contractType:
      type: string
      description: Contract type
      enum: [perpetual, current_quarter, next_quarter]
    interval:
      type: string
      description: Kline/Candlestick interval
    depthLevels:
      type: string
      description: Depth levels for partial book depth
      enum: [5, 10, 20]
    depthSpeed:
      type: string
      description: Update speed for depth streams
      enum: [100ms, 250ms, 500ms]
    markPriceInterval:
      type: string
      description: Mark price update interval
      enum: [1s, 3s]
    indexPriceInterval:
      type: string
      description: Index price update interval
      enum: [1s, 3s]

    # Control schemas
    subscribeRequest:
      type: object
      description: |
        Request to subscribe to one or more streams. Stream names should follow
        Binance naming conventions (lowercase, with @ separators).

        Supported stream patterns for Coin-M Futures:
        - Symbol streams: {symbol}@{streamType} (e.g., "btcusd_perp@aggTrade")
        - Index streams: {pair}@indexPrice (e.g., "btcusd@indexPrice", "btcusd@indexPrice@1s")
        - Mark price streams: {symbol}@markPrice (e.g., "btcusd_perp@markPrice", "btcusd_200626@markPrice@1s")
        - Mark price for pair: {pair}@markPrice (e.g., "btcusd@markPrice")
        - All market streams: !{streamType}@arr (e.g., "!miniTicker@arr", "!ticker@arr", "!forceOrder@arr")
        - All book tickers: !bookTicker
        - Depth streams: {symbol}@depth{levels}{speed} (e.g., "btcusd_perp@depth5@100ms", "btcusd_200626@depth20")
        - Kline streams: {symbol}@kline_{interval} (e.g., "btcusd_perp@kline_1m", "btcusd_200626@kline_4h")
        - Continuous kline: {pair}_{contractType}@continuousKline_{interval}
        - Index kline: {pair}@indexPriceKline_{interval}
        - Mark price kline: {symbol}@markPriceKline_{interval}
        - Liquidation: {symbol}@forceOrder or !forceOrder@arr
        - Contract info: !contractInfo
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: SUBSCRIBE
          description: Method name
        params:
          type: array
          description: Array of stream names to subscribe to
          items:
            type: string
            pattern: '^[a-zA-Z0-9!@._]+$'
          examples:
            - ["btcusd_perp@aggTrade"]
            - ["btcusd_perp@aggTrade", "btcusd_perp@depth5@100ms"]
            - ["btcusd@indexPrice", "btcusd@indexPrice@1s"]
            - ["btcusd_perp@markPrice", "btcusd_200626@markPrice@1s"]
            - ["btcusd@markPrice"]
            - ["ethusd_240329@kline_1m", "btcusd_perp@miniTicker"]
            - ["BTCUSD_PERPETUAL@continuousKline_1m"]
            - ["btcusd@indexPriceKline_1h", "btcusd_perp@markPriceKline_4h"]
            - ["btcusd_perp@forceOrder", "!forceOrder@arr"]
            - ["!miniTicker@arr", "!ticker@arr", "!bookTicker"]
            - ["!contractInfo"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 1

    unsubscribeRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: UNSUBSCRIBE
          description: Method name
        params:
          type: array
          description: Array of stream names to unsubscribe from
          items:
            type: string
          example: ["btcusd_perp@aggTrade"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 2

    subscribeResponse:
      type: object
      properties:
        result:
          type: "null"
          description: Always null for successful subscription
        id:
          type: integer
          format: int64

    listSubscriptionsRequest:
      type: object
      required:
        - method
        - id
      properties:
        method:
          type: string
          const: LIST_SUBSCRIPTIONS
          description: Method name
        id:
          type: integer
          format: int64
          description: Request ID
          example: 3

    listSubscriptionsResponse:
      type: object
      properties:
        result:
          type: array
          description: Array of active stream names
          items:
            type: string
          example: ["btcusd_perp@aggTrade", "btcusd_perp@markPrice"]
        id:
          type: integer
          format: int64

    setPropertyRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: SET_PROPERTY
          description: Method name
        params:
          type: array
          description: Array containing property name and value
          items:
            oneOf:
              - type: string
              - type: boolean
          minItems: 2
          maxItems: 2
          example: ["combined", true]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 5

    setPropertyResponse:
      type: object
      properties:
        result:
          type: "null"
          description: Always null for successful property setting
        id:
          type: integer
          format: int64

    getPropertyRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: GET_PROPERTY
          description: Method name
        params:
          type: array
          description: Array containing property name to retrieve
          items:
            type: string
          minItems: 1
          maxItems: 1
          example: ["combined"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 6

    getPropertyResponse:
      type: object
      properties:
        result:
          oneOf:
            - type: boolean
            - type: string
          description: Property value (currently only 'combined' property supported)
        id:
          type: integer
          format: int64

    errorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: integer
              description: Error code
            msg:
              type: string
              description: Error message
        id:
          type: integer
          format: int64

    # Stream event schemas
    aggregateTradeEvent:
      type: object
      required:
        - e
        - E
        - s
        - a
        - p
        - q
        - f
        - l
        - T
        - m
      properties:
        e:
          type: string
          description: Event type
          const: aggTrade
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591261134288
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        a:
          type: integer
          format: int64
          description: Aggregate trade ID
          example: 424951
        p:
          type: string
          description: Price
          example: "9643.5"
        q:
          type: string
          description: Quantity
          example: "2"
        f:
          type: integer
          format: int64
          description: First trade ID
          example: 606073
        l:
          type: integer
          format: int64
          description: Last trade ID
          example: 606073
        T:
          type: integer
          format: int64
          description: Trade time
          example: 1591261134199
        m:
          type: boolean
          description: Is the buyer the market maker
          example: false

    indexPriceEvent:
      type: object
      required:
        - e
        - E
        - i
        - p
      properties:
        e:
          type: string
          description: Event type
          const: indexPriceUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591261236000
        i:
          type: string
          description: Pair
          example: BTCUSD
        p:
          type: string
          description: Index price
          example: "9636.57860000"

    markPriceEvent:
      type: object
      required:
        - e
        - E
        - s
        - p
        - P
        - i
        - r
        - T
      properties:
        e:
          type: string
          description: Event type
          const: markPriceUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1596095725000
        s:
          type: string
          description: Symbol
          example: BTCUSD_201225
        p:
          type: string
          description: Mark price
          example: "10934.62615417"
        P:
          type: string
          description: Estimated settle price (only for quarterly contract)
          example: "10962.17178236"
        i:
          type: string
          description: Index price
          example: "10933.62615417"
        r:
          type: string
          description: Funding rate (empty for delivery symbols)
          example: ""
        T:
          type: integer
          format: int64
          description: Next funding time (0 for delivery symbols)
          example: 0

    allMarkPricesEvent:
      type: array
      description: Array of mark price events (for pair@markPrice or !markPrice@arr)
      items:
        $ref: '#/components/schemas/markPriceEvent'

    klineEvent:
      type: object
      required:
        - e
        - E
        - s
        - k
      properties:
        e:
          type: string
          description: Event type
          const: kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591261500000
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - s
            - i
            - f
            - L
            - o
            - c
            - h
            - l
            - v
            - n
            - x
            - q
            - V
            - Q
            - B
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1591261500000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1591261559999
            s:
              type: string
              description: Symbol
              example: BTCUSD_200626
            i:
              type: string
              description: Interval
              example: 1m
            f:
              type: integer
              format: int64
              description: First update ID
              example: 606400
            L:
              type: integer
              format: int64
              description: Last update ID
              example: 606430
            o:
              type: string
              description: Open price
              example: "41230.0"
            c:
              type: string
              description: Close price
              example: "41235.0"
            h:
              type: string
              description: High price
              example: "41240.0"
            l:
              type: string
              description: Low price
              example: "41225.0"
            v:
              type: string
              description: Volume
              example: "100.0"
            n:
              type: integer
              description: Number of trades
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false
            q:
              type: string
              description: Base asset volume
              example: "4123500.0"
            V:
              type: string
              description: Taker buy volume
              example: "60.0"
            Q:
              type: string
              description: Taker buy quote asset volume
              example: "2474100.0"
            B:
              type: string
              description: Ignore
              example: "0"

    continuousKlineEvent:
      type: object
      required:
        - e
        - E
        - ps
        - ct
        - k
      properties:
        e:
          type: string
          description: Event type
          const: continuous_kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591261500000
        ps:
          type: string
          description: Pair
          example: BTCUSD
        ct:
          type: string
          description: Contract type
          example: PERPETUAL
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - i
            - f
            - L
            - o
            - c
            - h
            - l
            - v
            - n
            - x
            - q
            - V
            - Q
            - B
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1591261500000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1591261559999
            i:
              type: string
              description: Interval
              example: 1m
            f:
              type: integer
              format: int64
              description: First update ID
              example: 606400
            L:
              type: integer
              format: int64
              description: Last update ID
              example: 606430
            o:
              type: string
              description: Open price
              example: "9631.70000000"
            c:
              type: string
              description: Close price
              example: "9636.64000000"
            h:
              type: string
              description: High price
              example: "9636.69000000"
            l:
              type: string
              description: Low price
              example: "9631.70000000"
            v:
              type: string
              description: Volume
              example: "100.00000000"
            n:
              type: integer
              description: Number of trades
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false
            q:
              type: string
              description: Base asset volume
              example: "963664.00000000"
            V:
              type: string
              description: Taker buy volume
              example: "60.00000000"
            Q:
              type: string
              description: Taker buy base asset volume
              example: "578198.40000000"
            B:
              type: string
              description: Ignore
              example: "0"

    indexKlineEvent:
      type: object
      required:
        - e
        - E
        - ps
        - k
      properties:
        e:
          type: string
          description: Event type
          const: indexPrice_kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591267070033
        ps:
          type: string
          description: Pair
          example: BTCUSD
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - i
            - o
            - c
            - h
            - l
            - n
            - x
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1591267020000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1591267079999
            i:
              type: string
              description: Interval
              example: 1m
            o:
              type: string
              description: Open price
              example: "9631.70000000"
            c:
              type: string
              description: Close price
              example: "9636.64000000"
            h:
              type: string
              description: High price
              example: "9636.69000000"
            l:
              type: string
              description: Low price
              example: "9631.70000000"
            n:
              type: integer
              description: Number of basic data
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false

    markPriceKlineEvent:
      type: object
      required:
        - e
        - E
        - s
        - k
      properties:
        e:
          type: string
          description: Event type
          const: markPrice_kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591267070033
        s:
          type: string
          description: Symbol
          example: BTCUSD_PERP
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - s
            - i
            - o
            - c
            - h
            - l
            - n
            - x
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1591267020000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1591267079999
            s:
              type: string
              description: Symbol
              example: BTCUSD_PERP
            i:
              type: string
              description: Interval
              example: 1m
            o:
              type: string
              description: Open price
              example: "9631.70000000"
            c:
              type: string
              description: Close price
              example: "9636.64000000"
            h:
              type: string
              description: High price
              example: "9636.69000000"
            l:
              type: string
              description: Low price
              example: "9631.70000000"
            n:
              type: integer
              description: Number of basic data
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false

    miniTickerEvent:
      type: object
      required:
        - e
        - E
        - s
        - ps
        - c
        - o
        - h
        - l
        - v
        - q
      properties:
        e:
          type: string
          description: Event type
          const: 24hrMiniTicker
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591269999042
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        c:
          type: string
          description: Close price
          example: "9524.6"
        o:
          type: string
          description: Open price
          example: "9644.2"
        h:
          type: string
          description: High price
          example: "9648.6"
        l:
          type: string
          description: Low price
          example: "9515.3"
        v:
          type: string
          description: Total traded volume
          example: "519.386"
        q:
          type: string
          description: Total traded base asset volume
          example: "4965141.8319"

    allMiniTickersEvent:
      type: array
      description: Array of mini ticker events
      items:
        $ref: '#/components/schemas/miniTickerEvent'

    tickerEvent:
      type: object
      required:
        - e
        - E
        - s
        - ps
        - p
        - P
        - w
        - c
        - Q
        - o
        - h
        - l
        - v
        - q
        - O
        - C
        - F
        - L
        - n
      properties:
        e:
          type: string
          description: Event type
          const: 24hrTicker
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591270260907
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        p:
          type: string
          description: Price change
          example: "-27.3"
        P:
          type: string
          description: Price change percent
          example: "-0.29"
        w:
          type: string
          description: Weighted average price
          example: "9541.03819782"
        c:
          type: string
          description: Last price
          example: "9528.5"
        Q:
          type: string
          description: Last quantity
          example: "5"
        o:
          type: string
          description: Open price
          example: "9555.8"
        h:
          type: string
          description: High price
          example: "9580.4"
        l:
          type: string
          description: Low price
          example: "9507.0"
        v:
          type: string
          description: Total traded volume
          example: "1384.856"
        q:
          type: string
          description: Total traded base asset volume
          example: "13212798.7357"
        O:
          type: integer
          format: int64
          description: Statistics open time
          example: 1591260000000
        C:
          type: integer
          format: int64
          description: Statistics close time
          example: 1591346399999
        F:
          type: integer
          format: int64
          description: First trade ID
          example: 606400
        L:
          type: integer
          format: int64
          description: Last trade ID
          example: 607955
        n:
          type: integer
          description: Total number of trades
          example: 1556

    allTickersEvent:
      type: array
      description: Array of ticker events
      items:
        $ref: '#/components/schemas/tickerEvent'

    bookTickerEvent:
      type: object
      required:
        - e
        - u
        - s
        - ps
        - b
        - B
        - a
        - A
        - T
        - E
      properties:
        e:
          type: string
          description: Event type
          const: bookTicker
        u:
          type: integer
          format: int64
          description: Order book update Id
          example: 400900217
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591270260907
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        b:
          type: string
          description: Best bid price
          example: "9517.6"
        B:
          type: string
          description: Best bid quantity
          example: "10"
        a:
          type: string
          description: Best ask price
          example: "9518.5"
        A:
          type: string
          description: Best ask quantity
          example: "45"
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1591270260901

    liquidationEvent:
      type: object
      required:
        - e
        - E
        - o
      properties:
        e:
          type: string
          description: Event type
          const: forceOrder
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591270260907
        o:
          type: object
          description: Liquidation order details
          required:
            - s
            - ps
            - S
            - o
            - f
            - q
            - p
            - ap
            - X
            - l
            - z
            - T
          properties:
            s:
              type: string
              description: Symbol
              example: BTCUSD_201225
            ps:
              type: string
              description: Pair
              example: BTCUSD
            S:
              type: string
              description: Side
              example: SELL
            o:
              type: string
              description: Order type
              example: LIMIT
            f:
              type: string
              description: Time in force
              example: GTC
            q:
              type: string
              description: Original quantity
              example: "0.001"
            p:
              type: string
              description: Price
              example: "9634.0"
            ap:
              type: string
              description: Average price
              example: "9630.0"
            X:
              type: string
              description: Order status
              example: FILLED
            l:
              type: string
              description: Order Last Filled Quantity
              example: "0.001"
            z:
              type: string
              description: Order Filled Accumulated Quantity
              example: "0.001"
            T:
              type: integer
              format: int64
              description: Order Trade Time
              example: 1591270260907

    contractInfoEvent:
      type: object
      required:
        - e
        - E
        - s
        - ps
        - ct
        - dt
        - ot
        - cs
        - bks
      properties:
        e:
          type: string
          description: Event type
          const: contractInfo
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        ct:
          type: string
          description: Contract type
          example: PERPETUAL
        dt:
          type: integer
          format: int64
          description: Delivery date time
          example: 4133404800000
        ot:
          type: integer
          format: int64
          description: onboard date time
          example: 1577836800000
        cs:
          type: string
          description: Contract status
          example: TRADING
        bks:
          type: array
          description: Bracket information
          items:
            type: object
            required:
              - bs
              - bnf
              - bnc
              - mmr
              - cf
              - mi
              - ma
            properties:
              bs:
                type: integer
                description: Notional bracket
                example: 1
              bnf:
                type: integer
                format: int64
                description: Floor notional of this bracket
                example: 0
              bnc:
                type: integer
                format: int64
                description: Cap notional of this bracket
                example: 250000
              mmr:
                type: number
                description: Maintenance ratio for this bracket
                example: 0.01
              cf:
                type: integer
                format: int64
                description: Auxiliary calculation number
                example: 0
              mi:
                type: integer
                description: Minimum leverage
                example: 21
              ma:
                type: integer
                description: Maximum leverage
                example: 50

    partialDepthEvent:
      type: object
      required:
        - e
        - E
        - T
        - s
        - ps
        - U
        - u
        - pu
        - b
        - a
      properties:
        e:
          type: string
          description: Event type
          const: depthUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591269996801
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1591269996646
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        U:
          type: integer
          format: int64
          description: First update ID in event
          example: 17276694
        u:
          type: integer
          format: int64
          description: Final update ID in event
          example: 17276701
        pu:
          type: integer
          format: int64
          description: Final update ID in last stream
          example: 17276678
        b:
          type: array
          description: Bids
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["9523.0", "5"]]
        a:
          type: array
          description: Asks
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["9524.6", "2"]]

    diffDepthEvent:
      type: object
      required:
        - e
        - E
        - T
        - s
        - ps
        - U
        - u
        - pu
        - b
        - a
      properties:
        e:
          type: string
          description: Event type
          const: depthUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1591270260907
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1591270260891
        s:
          type: string
          description: Symbol
          example: BTCUSD_200626
        ps:
          type: string
          description: Pair
          example: BTCUSD
        U:
          type: integer
          format: int64
          description: First update ID in event
          example: 17285681
        u:
          type: integer
          format: int64
          description: Final update ID in event
          example: 17285702
        pu:
          type: integer
          format: int64
          description: Previous final update ID in event
          example: 17285675
        b:
          type: array
          description: Bids to be updated
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["9517.6", "10"]]
        a:
          type: array
          description: Asks to be updated
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["9518.5", "45"]]

    combinedMarketStreamEvent:
      type: object
      description: |
        Wrapper for combined stream data. When connecting to combined streams,
        all events are wrapped with this structure to identify the source stream.

        The 'stream' field contains the original stream name, and 'data' contains
        the original event data that would be received from an individual stream.
      required:
        - stream
        - data
      properties:
        stream:
          type: string
          description: Original stream name that generated this event
          examples:
            - "btcusd_perp@aggTrade"
            - "btcusd_perp@depth5"
            - "btcusd@indexPrice"
            - "btcusd@indexPrice@1s"
            - "btcusd_perp@markPrice"
            - "btcusd_200626@markPrice@1s"
            - "btcusd@markPrice"
            - "BTCUSD_PERPETUAL@continuousKline_1m"
            - "btcusd@indexPriceKline_1h"
            - "btcusd_perp@markPriceKline_4h"
            - "btcusd_perp@forceOrder"
            - "!contractInfo"
            - "!miniTicker@arr"
            - "!ticker@arr"
            - "!bookTicker"
            - "!forceOrder@arr"
        data:
          description: |
            Original stream event data (unwrapped). This is exactly the same data
            that would be received when connecting to the individual stream directly.
            The event type can be determined by examining the 'stream' field.
          oneOf:
            - $ref: '#/components/schemas/aggregateTradeEvent'
            - $ref: '#/components/schemas/indexPriceEvent'
            - $ref: '#/components/schemas/markPriceEvent'
            - $ref: '#/components/schemas/allMarkPricesEvent'
            - $ref: '#/components/schemas/klineEvent'
            - $ref: '#/components/schemas/continuousKlineEvent'
            - $ref: '#/components/schemas/indexKlineEvent'
            - $ref: '#/components/schemas/markPriceKlineEvent'
            - $ref: '#/components/schemas/miniTickerEvent'
            - $ref: '#/components/schemas/allMiniTickersEvent'
            - $ref: '#/components/schemas/tickerEvent'
            - $ref: '#/components/schemas/bookTickerEvent'
            - $ref: '#/components/schemas/liquidationEvent'
            - $ref: '#/components/schemas/contractInfoEvent'
            - $ref: '#/components/schemas/partialDepthEvent'
            - $ref: '#/components/schemas/diffDepthEvent'
      example:
        stream: "btcusd_perp@aggTrade"
        data:
          e: "aggTrade"
          E: 1672304050123
          s: "BTCUSD_PERP"
          a: 12345
          p: "41234.5"
          q: "0.001"
          f: 100
          l: 105
          T: 1672304050120
          m: false

    # User data stream event schemas (COIN-M)
    listenKeyExpiredEvent:
      type: object
      description: User Data Stream Expired - sent when the listen key expires
      properties:
        e:
          type: string
          description: Event type
          const: listenKeyExpired
        E:
          type: integer
          format: int64
          description: Event time (timestamp)
          example: 1576653824250
        listenKey:
          type: string
          description: listen key
          example: WsCMN0a4KHUPTQuX6IUnqEZfB1inxmv1qR4kbf1LuEjur5VdbzqvyxqG9TSjVVxv

    accountUpdateEvent:
      type: object
      description: Balance and Position Update - sent when account balance or position changes
      properties:
        e:
          type: string
          description: Event type
          const: ACCOUNT_UPDATE
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1564034571105
        T:
          type: integer
          format: int64
          description: Transaction Time (milliseconds)
          example: 1564034571073
        i:
          type: string
          description: Account Alias
          example: SgsR
        a:
          type: object
          description: Update Data
          properties:
            m:
              type: string
              description: Event reason type
              example: ORDER
              enum: [ORDER, FUNDING_FEE, WITHDRAW, DEPOSIT, INSURANCE_CLEAR, BENEFITS, REFERRAL_KICKBACK, COMMISSION_REBATE, ADJUSTMENT]
            B:
              type: array
              description: Balance updates
              items:
                type: object
                properties:
                  a:
                    type: string
                    description: Asset
                    example: BTC
                  wb:
                    type: string
                    description: Wallet Balance
                    example: "1.00000000"
                  cw:
                    type: string
                    description: Cross Wallet Balance
                    example: "1.00000000"
                  bc:
                    type: string
                    description: Balance Change except PnL and Commission
                    example: "0.00000000"
            P:
              type: array
              description: Position updates
              items:
                type: object
                properties:
                  s:
                    type: string
                    description: Symbol
                    example: BTCUSD_PERP
                  pa:
                    type: string
                    description: Position Amount
                    example: "0"
                  ep:
                    type: string
                    description: Entry Price
                    example: "0.00000"
                  bep:
                    type: string
                    description: Breakeven Price
                    example: "0.0"
                  cr:
                    type: string
                    description: Accumulated Realized
                    example: "0"
                  up:
                    type: string
                    description: Unrealized PnL
                    example: "0.00000000"
                  mt:
                    type: string
                    description: Margin Type
                    example: cross
                    enum: [isolated, cross]
                  iw:
                    type: string
                    description: Isolated Wallet
                    example: "0.00000000"
                  ps:
                    type: string
                    description: Position Side
                    example: BOTH
                    enum: [LONG, SHORT, BOTH]

    marginCallEvent:
      type: object
      description: Margin Call - sent when account is under margin call
      properties:
        e:
          type: string
          description: Event Type
          const: MARGIN_CALL
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1587727187525
        i:
          type: string
          description: Account Alias
          example: SgsR
        cw:
          type: string
          description: Cross Wallet Balance (only for cross position)
          example: "3.16312014"
        p:
          type: array
          description: Position(s) of Margin Call
          items:
            type: object
            properties:
              s:
                type: string
                description: Symbol
                example: ETHUSD_PERP
              ps:
                type: string
                description: Position Side
                example: LONG
                enum: [LONG, SHORT, BOTH]
              pa:
                type: string
                description: Position Amount
                example: "1.327"
              mt:
                type: string
                description: Margin Type
                example: cross
                enum: [isolated, cross]
              iw:
                type: string
                description: Isolated Wallet
                example: "0"
              mp:
                type: string
                description: Mark Price
                example: "187.17127"
              up:
                type: string
                description: Unrealized PnL
                example: "-1.166074"
              mm:
                type: string
                description: Maintenance Margin Required
                example: "1.614445"

    orderTradeUpdateEvent:
      type: object
      description: Order Update - orders are updated with orderTradeUpdate event
      properties:
        e:
          type: string
          description: Event Type
          const: ORDER_TRADE_UPDATE
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1568879465651
        T:
          type: integer
          format: int64
          description: Transaction Time (milliseconds)
          example: 1568879465650
        i:
          type: string
          description: Account Alias
          example: SgsR
        o:
          type: object
          description: Order details
          properties:
            s:
              type: string
              description: Symbol
              example: BTCUSD_PERP
            c:
              type: string
              description: Client Order ID
              example: myOrder1
            S:
              type: string
              description: Side
              example: SELL
              enum: [BUY, SELL]
            o:
              type: string
              description: Order Type
              example: LIMIT
              enum: [LIMIT, MARKET, STOP, STOP_MARKET, TAKE_PROFIT, TAKE_PROFIT_MARKET, TRAILING_STOP_MARKET]
            f:
              type: string
              description: Time in Force
              example: GTC
              enum: [GTC, IOC, FOK, GTX]
            q:
              type: string
              description: Original Quantity
              example: "1"
            p:
              type: string
              description: Original Price
              example: "9000"
            ap:
              type: string
              description: Average Price
              example: "0"
            sp:
              type: string
              description: Stop Price
              example: "0"
            x:
              type: string
              description: Execution Type
              example: NEW
              enum: [NEW, CANCELED, CALCULATED, EXPIRED, TRADE]
            X:
              type: string
              description: Order Status
              example: NEW
              enum: [NEW, PARTIALLY_FILLED, FILLED, CANCELED, EXPIRED, NEW_INSURANCE, NEW_ADL]
            i:
              type: integer
              format: int64
              description: Order ID
              example: 8886774
            l:
              type: string
              description: Order Last Filled Quantity
              example: "0"
            z:
              type: string
              description: Order Filled Accumulated Quantity
              example: "0"
            L:
              type: string
              description: Last Filled Price
              example: "0"
            N:
              type: string
              description: Commission Asset
              example: BTC
            n:
              type: string
              description: Commission
              example: "0"
            T:
              type: integer
              format: int64
              description: Order Trade Time
              example: 1568879465651
            t:
              type: integer
              format: int64
              description: Trade ID
              example: 0
            rp:
              type: string
              description: Realized Profit
              example: "0"
            b:
              type: string
              description: Bid quantity of base asset
              example: "0"
            a:
              type: string
              description: Ask quantity of base asset
              example: "9"
            m:
              type: boolean
              description: Is this trade the maker side
              example: false
            R:
              type: boolean
              description: Is reduce only
              example: false
            wt:
              type: string
              description: Stop Price Working Type
              example: MARK_PRICE
              enum: [MARK_PRICE, CONTRACT_PRICE]
            ot:
              type: string
              description: Original Order Type
              example: LIMIT
              enum: [LIMIT, MARKET, STOP, STOP_MARKET, TAKE_PROFIT, TAKE_PROFIT_MARKET, TRAILING_STOP_MARKET]
            ps:
              type: string
              description: Position Side
              example: BOTH
              enum: [LONG, SHORT, BOTH]
            cp:
              type: boolean
              description: Conditional Order
              example: false
            AP:
              type: string
              description: Activation Price
              example: "0"
            cr:
              type: string
              description: Callback Rate
              example: "0"
            pP:
              type: boolean
              description: Is protected
              example: false
            V:
              type: string
              description: STP mode
              example: "EXPIRE_TAKER"
            pm:
              type: string
              description: Price match mode
              example: "NONE"

    accountConfigUpdateEvent:
      type: object
      description: Account Configuration Update - sent when account configuration changes (leverage update)
      properties:
        e:
          type: string
          description: Event Type
          const: ACCOUNT_CONFIG_UPDATE
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1611646737479
        T:
          type: integer
          format: int64
          description: Transaction Time (milliseconds)
          example: 1611646737476
        ac:
          type: object
          description: Account Configuration for Trade Pair
          properties:
            s:
              type: string
              description: Symbol
              example: BTCUSD_PERP
            l:
              type: integer
              description: Leverage
              example: 125

    strategyUpdateEvent:
      type: object
      description: Strategy Update - sent when strategy status changes
      properties:
        e:
          type: string
          description: Event Type
          const: STRATEGY_UPDATE
        T:
          type: integer
          format: int64
          description: Transaction Time (milliseconds)
          example: 1669693493658
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1669693493819
        su:
          type: object
          description: Strategy Update
          properties:
            si:
              type: integer
              format: int64
              description: Strategy ID
              example: 123456789
            st:
              type: string
              description: Strategy Type
              example: GRID
            ss:
              type: string
              description: Strategy Status
              example: NEW
              enum: [NEW, WORKING, CANCELLED, EXPIRED]
            s:
              type: string
              description: Symbol
              example: BTCUSD_PERP
            ut:
              type: integer
              format: int64
              description: Update Time (milliseconds)
              example: 1669693493658
            c:
              type: integer
              description: Operation Code
              example: 1

    gridUpdateEvent:
      type: object
      description: Grid Update - sent when grid strategy updates
      properties:
        e:
          type: string
          description: Event Type
          const: GRID_UPDATE
        T:
          type: integer
          format: int64
          description: Transaction Time (milliseconds)
          example: 1669693493658
        E:
          type: integer
          format: int64
          description: Event Time (milliseconds)
          example: 1669693493819
        gu:
          type: object
          description: Grid Update
          properties:
            si:
              type: integer
              format: int64
              description: Strategy ID
              example: 123456789
            st:
              type: string
              description: Strategy Type
              example: GRID
            ss:
              type: string
              description: Strategy Status
              example: WORKING
              enum: [NEW, WORKING, CANCELLED, EXPIRED]
            s:
              type: string
              description: Symbol
              example: BTCUSD_PERP
            r:
              type: string
              description: Realized PNL
              example: "8.59033754"
            up:
              type: string
              description: Unmatched Average Price
              example: "56999.99"
            uq:
              type: string
              description: Unmatched Quantity
              example: "0.004"
            uf:
              type: string
              description: Unmatched Fee
              example: "0.0228"
            mp:
              type: string
              description: Matched PNL
              example: "15.12345678"
            ut:
              type: integer
              format: int64
              description: Update Time (milliseconds)
              example: 1669262908197

    # User data stream control schemas
    userDataStreamStartRequest:
      type: object
      description: request schema
      properties:
        id:
          type: string
          description: id property
          example: d3df8a61-98ea-4fe0-8f4e-0fcea5d418b0
        method:
          type: string
          description: method property
          const: userDataStream.start
        params:
          type: object
          description: params property
          properties:
            apiKey:
              type: string
              description: Required if session is not authenticated via session.logon

    userDataStreamStartResponse:
      type: object
      description: response schema
      properties:
        id:
          type: string
          description: id property
          example: d3df8a61-98ea-4fe0-8f4e-0fcea5d418b0
        rateLimits:
          type: array
          description: rateLimits property
          items:
            type: object
            description: array item
            properties:
              count:
                type: integer
                description: count property
                example: 8
              interval:
                type: string
                description: interval property
                example: MINUTE
              intervalNum:
                type: integer
                description: intervalNum property
                example: 1
              limit:
                type: integer
                description: limit property
                example: 2400
              rateLimitType:
                type: string
                description: rateLimitType property
                example: REQUEST_WEIGHT
        result:
          type: object
          description: result property
          properties:
            listenKey:
              type: string
              description: listenKey property
              example: xs0mRXdAKlIPDRFrlPcw0qI41Eh3ixNntmymGyhrhgqo7L6FuLaWArTD7RLP
        status:
          type: integer
          description: status property
          example: 200

    userDataStreamPingRequest:
      type: object
      description: request schema
      properties:
        id:
          type: string
          description: id property
          example: 815d5fce-0880-4287-a567-80badf004c74
        method:
          type: string
          description: method property
          const: userDataStream.ping
        params:
          type: object
          description: params property
          properties:
            apiKey:
              type: string
              description: Required if session is not authenticated via session.logon

    userDataStreamPingResponse:
      type: object
      description: response schema
      properties:
        id:
          type: string
          description: id property
          example: 815d5fce-0880-4287-a567-80badf004c74
        rateLimits:
          type: array
          description: rateLimits property
          items:
            type: object
            description: array item
            properties:
              count:
                type: integer
                description: count property
                example: 2
              interval:
                type: string
                description: interval property
                example: MINUTE
              intervalNum:
                type: integer
                description: intervalNum property
                example: 1
              limit:
                type: integer
                description: limit property
                example: 2400
              rateLimitType:
                type: string
                description: rateLimitType property
                example: REQUEST_WEIGHT
        result:
          type: object
          description: result property
          properties:
            listenKey:
              type: string
              description: listenKey property
              example: 3HBntNTepshgEdjIwSUIBgB9keLyOCg5qv3n6bYAtktG8ejcaW5HXz9Vx1JgIieg
        status:
          type: integer
          description: status property
          example: 200

    userDataStreamStopRequest:
      type: object
      description: request schema
      properties:
        id:
          type: string
          description: id property
          example: 819e1b1b-8c06-485b-a13e-131326c69599
        method:
          type: string
          description: method property
          const: userDataStream.stop
        params:
          type: object
          description: params property
          properties:
            apiKey:
              type: string
              description: Required if session is not authenticated via session.logon

    userDataStreamStopResponse:
      type: object
      description: response schema
      properties:
        id:
          type: string
          description: id property
          example: 819e1b1b-8c06-485b-a13e-131326c69599
        rateLimits:
          type: array
          description: rateLimits property
          items:
            type: object
            description: array item
            properties:
              count:
                type: integer
                description: count property
                example: 2
              interval:
                type: string
                description: interval property
                example: MINUTE
              intervalNum:
                type: integer
                description: intervalNum property
                example: 1
              limit:
                type: integer
                description: limit property
                example: 2400
              rateLimitType:
                type: string
                description: rateLimitType property
                example: REQUEST_WEIGHT
        result:
          type: object
          description: result property
        status:
          type: integer
          description: status property
          example: 200
