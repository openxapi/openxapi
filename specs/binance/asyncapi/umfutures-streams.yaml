asyncapi: 3.0.0
info:
  title: Binance USD-S Margined Futures WebSocket Streams
  version: 2.0.0
  description: |
    AsyncAPI specification for Binance USD-S Margined Futures WebSocket Streams (Market Data).
    
    This specification covers:
    1. Market Data Streams: Real-time futures market data without authentication
    
    ## Connection Types
    
    ### Single Market Streams
    - Connection: Connect to `/ws/{streamName}` directly (or `/ws` and SUBSCRIBE)
    - Data Format: Direct stream data (not wrapped)
    - Property: `combined = false`
    - Example: `wss://fstream.binance.com/ws/btcusdt@aggTrade`
    
    ### Combined Streams (Multiple Streams)
    - Connection: Connect to `/stream?streams=<streamName1>/<streamName2>`
    - Data Format: Wrapped as `{"stream":"<streamName>","data":<rawPayload>}`
    - Property: `combined = true`
    - Max Streams: 1024 streams per connection
    - Example: `wss://fstream.binance.com/stream?streams=btcusdt@aggTrade/ethusdt@kline_1m`
    
    ## Connection Management
    
    ### Initial Connection
    - Market Streams: Connect to `/ws/{streamName}` for single streams or `/stream` for combined streams
    - Use SUBSCRIBE method to add streams dynamically
    
    ### Heartbeat
    - Server sends ping periodically (about every 20s)
    - Client must respond with pong within 1 minute
    - Connection will be disconnected if no pong received
    
    ### Limits and Validity
    - Connection Validity: up to 24 hours
    - Rate Limit: 10 incoming messages per second
    - Streams per Connection: Maximum 1024 streams (market streams)
    - Connections per IP: Rate limiting applies
    
    ### Stream Naming Conventions
    - Symbols are lowercase (e.g., btcusdt)
    - Stream names are lowercase
    - Multiple streams can be combined in a single connection
    - Futures-specific streams include liquidation, mark price, index, etc.

servers:
  mainnet1:
    host: fstream.binance.com
    protocol: wss
    pathname: /
    title: Binance USD-S Margined Futures Server
    summary: Binance USD-S Margined Futures WebSocket Streams Server (Mainnet)
    description: WebSocket server for Binance USD-S margined futures market data streams (mainnet)

  testnet1:
    host: fstream.binancefuture.com
    protocol: wss
    pathname: /
    title: Binance USD-S Margined Futures Testnet Server
    summary: Binance USD-S Margined Futures WebSocket Streams Server (Testnet)
    description: WebSocket server for Binance USD-S margined futures market data streams (testnet)

channels:
  # Single market stream connection (connect to /ws/<streamName> directly)
  marketStreams:
    address: /ws/{streamName}
    title: Single Market Streams Connection
    description: |
      Direct connection endpoint for individual market streams. Connect here to receive
      data from a specific stream. Each stream returns direct data.
    parameters:
      streamName:
        description: The specific stream name to connect to
        examples:
          - btcusdt@aggTrade
          - btcusdt@kline_1m
          - btcusdt@markPrice
    messages:
      subscribe:
        $ref: '#/components/messages/subscribeRequest'
      unsubscribe:
        $ref: '#/components/messages/unsubscribeRequest'
      subscribeResponse:
        $ref: '#/components/messages/subscriptionResponse'
      unsubscribeResponse:
        $ref: '#/components/messages/unsubscriptionResponse'
      listSubscriptions:
        $ref: '#/components/messages/listSubscriptionsRequest'
      listSubscriptionsResponse:
        $ref: '#/components/messages/listSubscriptionsResponse'
      setProperty:
        $ref: '#/components/messages/setPropertyRequest'
      setPropertyResponse:
        $ref: '#/components/messages/setPropertyResponse'
      getProperty:
        $ref: '#/components/messages/getPropertyRequest'
      getPropertyResponse:
        $ref: '#/components/messages/getPropertyResponse'
      error:
        $ref: '#/components/messages/errorMessage'
      # Single stream data messages (direct, not wrapped)
      aggregateTradeEvent:
        $ref: '#/components/messages/aggregateTradeEvent'
      markPriceEvent:
        $ref: '#/components/messages/markPriceEvent'
      allMarkPricesEvent:
        $ref: '#/components/messages/allMarkPricesEvent'
      klineEvent:
        $ref: '#/components/messages/klineEvent'
      continuousKlineEvent:
        $ref: '#/components/messages/continuousKlineEvent'
      miniTickerEvent:
        $ref: '#/components/messages/miniTickerEvent'
      allMiniTickersEvent:
        $ref: '#/components/messages/allMiniTickersEvent'
      tickerEvent:
        $ref: '#/components/messages/tickerEvent'
      allTickersEvent:
        $ref: '#/components/messages/allTickersEvent'
      bookTickerEvent:
        $ref: '#/components/messages/bookTickerEvent'
      allBookTickersEvent:
        $ref: '#/components/messages/allBookTickersEvent'
      liquidationEvent:
        $ref: '#/components/messages/liquidationEvent'
      allLiquidationsEvent:
        $ref: '#/components/messages/allLiquidationsEvent'
      partialDepthEvent:
        $ref: '#/components/messages/partialDepthEvent'
      diffDepthEvent:
        $ref: '#/components/messages/diffDepthEvent'
      compositeIndexEvent:
        $ref: '#/components/messages/compositeIndexEvent'
      contractInfoEvent:
        $ref: '#/components/messages/contractInfoEvent'
      assetIndexEvent:
        $ref: '#/components/messages/assetIndexEvent'
      allAssetIndexesEvent:
        $ref: '#/components/messages/allAssetIndexesEvent'

  # Combined stream connection (connect to /stream?streams=...)
  combinedMarketStreams:
    address: /stream?streams={streams}
    title: Combined Market Streams Connection
    description: |
      Initial connection endpoint for combined market streams. Connect here first, then use
      query parameters or SUBSCRIBE method to add multiple streams. Each stream returns wrapped data
      with format: {"stream":"<streamName>","data":<rawPayload>}
    x-unwrapped-event-messages:
      - aggregateTradeEvent
      - markPriceEvent
      - allMarkPricesEvent
      - klineEvent
      - continuousKlineEvent
      - miniTickerEvent
      - allMiniTickersEvent
      - tickerEvent
      - allTickersEvent
      - bookTickerEvent
      - allBookTickersEvent
      - liquidationEvent
      - allLiquidationsEvent
      - partialDepthEvent
      - diffDepthEvent
      - compositeIndexEvent
      - contractInfoEvent
      - assetIndexEvent
      - allAssetIndexesEvent
    parameters:
      streams:
        description: |
          Slash-separated list of stream names to subscribe on connect.
          Format: `<streamName1>/<streamName2>/<streamName3>`.
        examples:
          - btcusdt@aggTrade/ethusdt@kline_1m
          - btcusdt@markPrice/!miniTicker@arr
          - BTCUSDT_PERPETUAL@continuousKline_1m/btcusdt@depth5@100ms
    messages:
      subscribe:
        $ref: '#/components/messages/subscribeRequest'
      unsubscribe:
        $ref: '#/components/messages/unsubscribeRequest'
      subscribeResponse:
        $ref: '#/components/messages/subscriptionResponse'
      unsubscribeResponse:
        $ref: '#/components/messages/unsubscriptionResponse'
      listSubscriptions:
        $ref: '#/components/messages/listSubscriptionsRequest'
      listSubscriptionsResponse:
        $ref: '#/components/messages/listSubscriptionsResponse'
      setProperty:
        $ref: '#/components/messages/setPropertyRequest'
      setPropertyResponse:
        $ref: '#/components/messages/setPropertyResponse'
      getProperty:
        $ref: '#/components/messages/getPropertyRequest'
      getPropertyResponse:
        $ref: '#/components/messages/getPropertyResponse'
      error:
        $ref: '#/components/messages/errorMessage'
      # Combined market streams data messages (wrapped format)
      combinedMarketStreamsEvent:
        $ref: '#/components/messages/combinedMarketStreamsEvent'

operations:
  # Single market stream operations
  subscribeToMarketStreams:
    title: Subscribe to Single Market Streams
    summary: Subscribe to market streams on single connection
    description: |
      Subscribe to market data streams on single connection. Each stream returns
      direct data without wrapping. Maximum 1024 streams per connection.
    action: send
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/subscribe'
    reply:
      channel:
        $ref: '#/channels/marketStreams'
      messages:
        - $ref: '#/channels/marketStreams/messages/subscribeResponse'

  unsubscribeFromMarketStreams:
    title: Unsubscribe from Single Market Streams
    summary: Unsubscribe from market streams on single connection
    action: send
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/unsubscribe'
    reply:
      channel:
        $ref: '#/channels/marketStreams'
      messages:
        - $ref: '#/channels/marketStreams/messages/unsubscribeResponse'

  listSubscriptionsFromMarketStreams:
    title: List Single Stream Subscriptions
    summary: Get list of active single stream subscriptions
    action: send
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/listSubscriptions'
    reply:
      channel:
        $ref: '#/channels/marketStreams'
      messages:
        - $ref: '#/channels/marketStreams/messages/listSubscriptionsResponse'

  setPropertyOnMarketStreams:
    title: Set Property on Single Market Streams
    summary: Set a property on the single market stream connection
    description: |
      Set a property on the single market stream connection. Currently only
      the `combined` property is supported.
    action: send
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/setProperty'
    reply:
      channel:
        $ref: '#/channels/marketStreams'
      messages:
        - $ref: '#/channels/marketStreams/messages/setPropertyResponse'

  getPropertyFromMarketStreams:
    title: Get Property from Single Market Streams
    summary: Get a property from the single market stream connection
    description: |
      Get a property from the single market stream connection. Currently only
      the `combined` property is supported.
    action: send
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/getProperty'
    reply:
      channel:
        $ref: '#/channels/marketStreams'
      messages:
        - $ref: '#/channels/marketStreams/messages/getPropertyResponse'

  receiveEventsFromMarketStreams:
    title: Receive Single Stream Data
    summary: Receive direct stream data from single connection
    description: |
      Receive market data from subscribed streams. Data is returned directly
      without wrapping.
    action: receive
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/aggregateTradeEvent'
      - $ref: '#/channels/marketStreams/messages/markPriceEvent'
      - $ref: '#/channels/marketStreams/messages/allMarkPricesEvent'
      - $ref: '#/channels/marketStreams/messages/klineEvent'
      - $ref: '#/channels/marketStreams/messages/continuousKlineEvent'
      - $ref: '#/channels/marketStreams/messages/miniTickerEvent'
      - $ref: '#/channels/marketStreams/messages/allMiniTickersEvent'
      - $ref: '#/channels/marketStreams/messages/tickerEvent'
      - $ref: '#/channels/marketStreams/messages/allTickersEvent'
      - $ref: '#/channels/marketStreams/messages/bookTickerEvent'
      - $ref: '#/channels/marketStreams/messages/allBookTickersEvent'
      - $ref: '#/channels/marketStreams/messages/liquidationEvent'
      - $ref: '#/channels/marketStreams/messages/allLiquidationsEvent'
      - $ref: '#/channels/marketStreams/messages/partialDepthEvent'
      - $ref: '#/channels/marketStreams/messages/diffDepthEvent'
      - $ref: '#/channels/marketStreams/messages/compositeIndexEvent'
      - $ref: '#/channels/marketStreams/messages/contractInfoEvent'
      - $ref: '#/channels/marketStreams/messages/assetIndexEvent'
      - $ref: '#/channels/marketStreams/messages/allAssetIndexesEvent'

  receiveErrorFromMarketStreams:
    title: Receive Error Messages from Single Market Streams
    summary: Receive error messages from single market stream connection
    description: Receive error messages in response to invalid requests or other issues.
    action: receive
    channel:
      $ref: '#/channels/marketStreams'
    messages:
      - $ref: '#/channels/marketStreams/messages/error'

  # Combined stream operations
  subscribeToCombinedMarketStreams:
    title: Subscribe to Combined Market Streams
    summary: Subscribe to market streams on combined connection
    description: |
      Subscribe to market data streams on combined connection. Each stream returns
      wrapped data with stream name identifier. Maximum 1024 streams per connection.
    action: send
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/subscribe'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStreams'
      messages:
        - $ref: '#/channels/combinedMarketStreams/messages/subscribeResponse'

  unsubscribeFromCombinedMarketStreams:
    title: Unsubscribe from Combined Market Streams
    summary: Unsubscribe from market streams on combined connection
    action: send
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/unsubscribe'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStreams'
      messages:
        - $ref: '#/channels/combinedMarketStreams/messages/unsubscribeResponse'

  listSubscriptionsFromCombinedMarketStreams:
    title: List Combined Stream Subscriptions
    summary: Get list of active combined stream subscriptions
    action: send
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/listSubscriptions'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStreams'
      messages:
        - $ref: '#/channels/combinedMarketStreams/messages/listSubscriptionsResponse'

  setPropertyOnCombinedMarketStreams:
    title: Set Property on Combined Market Streams
    summary: Set a property on the combined market stream connection
    action: send
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/setProperty'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStreams'
      messages:
        - $ref: '#/channels/combinedMarketStreams/messages/setPropertyResponse'

  getPropertyFromCombinedMarketStreams:
    title: Get Property from Combined Market Streams
    summary: Get a property from the combined market stream connection
    action: send
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/getProperty'
    reply:
      channel:
        $ref: '#/channels/combinedMarketStreams'
      messages:
        - $ref: '#/channels/combinedMarketStreams/messages/getPropertyResponse'

  receiveEventsFromCombinedMarketStreams:
    title: Receive Combined Stream Data
    summary: Receive wrapped stream data from combined connection
    description: |
      Receive market data from subscribed streams. Each message is wrapped with
      stream name and original data: {"stream":"<streamName>","data":<rawPayload>}
    action: receive
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/combinedMarketStreamsEvent'

  receiveErrorFromCombinedMarketStreams:
    title: Receive Error Messages from Combined Market Streams
    summary: Receive error messages from combined market stream connection
    action: receive
    channel:
      $ref: '#/channels/combinedMarketStreams'
    messages:
      - $ref: '#/channels/combinedMarketStreams/messages/error'

components:
  messages:
    # Control messages (with correlation IDs)
    subscribeRequest:
      name: Subscribe Request
      title: Subscribe to Streams
      summary: Request to subscribe to one or more streams
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscribeRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    unsubscribeRequest:
      name: Unsubscribe Request
      title: Unsubscribe from Streams
      summary: Request to unsubscribe from one or more streams
      contentType: application/json
      payload:
        $ref: '#/components/schemas/unsubscribeRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    subscriptionResponse:
      name: Subscription Response
      title: Subscription Response
      summary: Response to subscription request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscriptionResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    unsubscriptionResponse:
      name: Unsubscribe Response
      title: Unsubscribe Response
      summary: Response to unsubscription request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/subscriptionResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    listSubscriptionsRequest:
      name: List Subscriptions Request
      title: List Active Subscriptions
      summary: Request list of active subscriptions
      contentType: application/json
      payload:
        $ref: '#/components/schemas/listSubscriptionsRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    listSubscriptionsResponse:
      name: List Subscriptions Response
      title: Active Subscriptions List
      summary: List of currently active subscriptions
      contentType: application/json
      payload:
        $ref: '#/components/schemas/listSubscriptionsResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    setPropertyRequest:
      name: Set Property Request
      title: Set Property Request
      summary: Request to set a stream property
      contentType: application/json
      payload:
        $ref: '#/components/schemas/setPropertyRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    setPropertyResponse:
      name: Set Property Response
      title: Set Property Response
      summary: Response to set property request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/setPropertyResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    getPropertyRequest:
      name: Get Property Request
      title: Get Property Request
      summary: Request to get a stream property
      contentType: application/json
      payload:
        $ref: '#/components/schemas/getPropertyRequest'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    getPropertyResponse:
      name: Get Property Response
      title: Get Property Response
      summary: Response to get property request
      contentType: application/json
      payload:
        $ref: '#/components/schemas/getPropertyResponse'
      correlationId:
        location: $message.payload#/id
        description: Message correlation ID

    errorMessage:
      name: Error Message
      title: Error Response
      summary: Error response from server
      x-error: true
      x-handler-key: error
      contentType: application/json
      payload:
        $ref: '#/components/schemas/errorResponse'

    combinedMarketStreamsEvent:
      name: Combined Stream Data
      title: Combined Stream Wrapper
      summary: Wrapper for combined stream data (combined connection)
      contentType: application/json
      payload:
        $ref: '#/components/schemas/combinedMarketStreamsEvent'

    # Stream data messages (raw format)
    aggregateTradeEvent:
      name: Aggregate Trade
      title: Aggregate Trade Event
      summary: Aggregate trade information for futures
      x-event: true
      x-stream-pattern: ['{symbol}@aggTrade']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@aggTrade']
      x-update-speed: ['100ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/aggregateTradeEvent'

    markPriceEvent:
      name: Mark Price
      title: Mark Price Event
      summary: Mark price update for a single symbol
      x-event: true
      x-stream-pattern: ['{symbol}@markPrice', '{symbol}@markPrice@{markPriceInterval}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        markPriceInterval:
          $ref: '#/components/schemas/markPriceInterval'
      x-stream-example: ['btcusdt@markPrice', 'btcusdt@markPrice@1s']
      x-update-speed: ['1000ms', '3000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/markPriceEvent'

    allMarkPricesEvent:
      name: All Mark Prices
      title: Mark Price Stream for All market
      summary: Mark price and funding rate for all symbols pushed every 3 seconds or every second.
      x-event: true
      x-response-format: array
      x-stream-pattern: ['!markPrice@arr', '!markPrice@arr@{markPriceInterval}']
      x-stream-params:
        markPriceInterval:
          $ref: '#/components/schemas/markPriceInterval'
      x-stream-example: ['!markPrice@arr', '!markPrice@arr@3s']
      x-update-speed: ['1000ms', '3000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allMarkPricesEvent'

    klineEvent:
      name: Kline
      title: Kline Event
      summary: The Kline/Candlestick Stream push updates to the current klines/candlestick every 250 milliseconds (if existing).
      x-event: true
      x-stream-pattern: ['{symbol}@kline_{interval}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['btcusdt@kline_1m']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/klineEvent'

    continuousKlineEvent:
      name: Continuous Kline
      title: Continuous Contract Kline Event
      summary: Continuous contract kline information
      x-event: true
      x-stream-pattern: ['{pair}_{contractType}@continuousKline_{interval}']
      x-stream-params:
        pair:
          $ref: '#/components/schemas/pair'
        contractType:
          $ref: '#/components/schemas/contractType'
        interval:
          $ref: '#/components/schemas/interval'
      x-stream-example: ['BTCUSDT_PERPETUAL@continuousKline_1m']
      x-update-speed: ['250ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/continuousKlineEvent'

    miniTickerEvent:
      name: Mini Ticker
      title: 24hr Mini Ticker Event
      summary: 24hr rolling window mini-ticker statistics for a single symbol. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before.
      x-event: true
      x-stream-pattern: ['{symbol}@miniTicker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@miniTicker']
      x-update-speed: ['2s']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/miniTickerEvent'

    allMiniTickersEvent:
      name: All Mini Tickers
      title: All Market Mini Tickers
      summary: 24hr rolling window mini-ticker statistics for all symbols. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before. Note that only tickers that have changed will be present in the array.
      x-event: true
      x-response-format: array
      x-event-type: 24hrMiniTicker
      x-stream-pattern: ['!miniTicker@arr']
      x-stream-example: ['!miniTicker@arr']
      x-update-speed: ['1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allMiniTickersEvent'

    tickerEvent:
      name: Ticker
      title: 24hr Ticker Event
      summary: 24hr rolling window ticker statistics for a single symbol. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before.
      x-event: true
      x-stream-pattern: ['{symbol}@ticker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@ticker']
      x-update-speed: ['2000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/tickerEvent'

    allTickersEvent:
      name: All Tickers
      title: All Market Tickers
      summary: 24hr rolling window ticker statistics for all symbols. These are NOT the statistics of the UTC day, but a 24hr rolling window from requestTime to 24hrs before. Note that only tickers that have changed will be present in the array.
      x-event: true
      x-response-format: array
      x-event-type: 24hrTicker
      x-stream-pattern: ['!ticker@arr']
      x-stream-example: ['!ticker@arr']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allTickerEvent'

    bookTickerEvent:
      name: Book Ticker
      title: Book Ticker Event
      summary: Pushes any update to the best bid or ask's price or quantity in real-time for a specified symbol.
      x-event: true
      x-stream-pattern: ['{symbol}@bookTicker']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@bookTicker']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/bookTickerEvent'

    allBookTickersEvent:
      name: All Book Tickers
      title: All Market Book Tickers
      summary: Pushes any update to the best bid or ask's price or quantity in real-time for all symbols.
      x-event: true
      x-stream-pattern: ['!bookTicker']
      x-stream-example: ['!bookTicker']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/bookTickerEvent'

    liquidationEvent:
      name: Liquidation
      title: Liquidation Order Event
      summary: The Liquidation Order Snapshot Streams push force liquidation order information for specific symbol. For each symbol, only the latest one liquidation order within 1000ms will be pushed as the snapshot. If no liquidation happens in the interval of 1000ms, no stream will be pushed.
      x-event: true
      x-stream-pattern: ['{symbol}@forceOrder']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@forceOrder']
      x-update-speed: ['1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/liquidationEvent'

    allLiquidationsEvent:
      name: All Liquidations
      title: All Market Liquidations
      summary: The All Liquidation Order Snapshot Streams push force liquidation order information for all symbols in the market. For each symbol, only the latest one liquidation order within 1000ms will be pushed as the snapshot. If no liquidation happens in the interval of 1000ms, no stream will be pushed.
      x-event: true
      x-response-format: array
      x-event-type: forceOrder
      x-stream-pattern: ['!forceOrder@arr']
      x-stream-example: ['!forceOrder@arr']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allLiquidationsEvent'

    partialDepthEvent:
      name: Partial Depth
      title: Partial Book Depth Event
      summary: Top <levels> bids and asks, Valid <levels> are 5, 10, or 20.
      x-event: true
      x-stream-pattern: ['{symbol}@depth{levels}', '{symbol}@depth{levels}@{speed}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        levels:
          $ref: '#/components/schemas/depthLevels'
        speed:
          $ref: '#/components/schemas/depthSpeed'
      x-stream-example: ['btcusdt@depth5@100ms']
      x-update-speed: ['100ms', '250ms', '500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/partialDepthEvent'

    diffDepthEvent:
      name: Diff Depth
      title: Depth Update Event
      summary: Order book depth update for futures
      x-event: true
      x-stream-pattern: ['{symbol}@depth', '{symbol}@depth@{speed}']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
        speed:
          $ref: '#/components/schemas/depthSpeed'
      x-stream-example: ['btcusdt@depth@100ms']
      x-update-speed: ['100ms', '250ms', '500ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/diffDepthEvent'

    compositeIndexEvent:
      name: Composite Index
      title: Composite Index Event
      summary: Composite index information for index symbols pushed every second.
      x-event: true
      x-stream-pattern: ['{symbol}@compositeIndex']
      x-stream-params:
        symbol:
          $ref: '#/components/schemas/symbol'
      x-stream-example: ['btcusdt@compositeIndex']
      x-update-speed: ['1000ms']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/compositeIndexEvent'

    contractInfoEvent:
      name: Contract Info
      title: Contract Info Event
      summary: ContractInfo stream pushes when contract info updates(listing/settlement/contract bracket update). bks field only shows up when bracket gets updated.
      x-event: true
      x-stream-pattern: ['!contractInfo']
      x-stream-example: ['!contractInfo']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/contractInfoEvent'

    assetIndexEvent:
      name: Asset Index
      title: Asset Index Event
      summary: Asset index information for Multi-Assets Mode
      x-event: true
      x-stream-pattern: ['{assetSymbol}@assetIndex']
      x-stream-params:
        assetSymbol:
          $ref: '#/components/schemas/assetSymbol'
      x-stream-example: ['btcusd@assetIndex']
      x-update-speed: ['1s']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/assetIndexEvent'

    allAssetIndexesEvent:
      name: All Asset Index
      title: All Asset Index Event
      summary: Array of asset index for all assets
      x-event: true
      x-response-format: array
      x-event-type: assetIndexUpdate
      x-stream-pattern: ['!assetIndex@arr']
      x-stream-example: ['!assetIndex@arr']
      x-update-speed: ['1s']
      contentType: application/json
      payload:
        $ref: '#/components/schemas/allAssetIndexesEvent'

  schemas:
    symbol:
      type: string
      description: Trading pair symbol in lowercase (e.g., btcusdt)
    markPriceInterval:
      type: string
      description: Mark price update interval
      enum:
        - 1s
        - 3s
    interval:
      type: string
      description: Kline/Candlestick interval
    pair:
      type: string
      description: Trading pair (e.g., BTCUSDT)
    contractType:
      type: string
      description: Contract type
      enum:
        - perpetual
        - current_quarter
        - next_quarter
    depthLevels:
      type: string
      description: Depth levels for partial book depth
      enum:
        - 5
        - 10
        - 20
    depthSpeed:
      type: string
      description: Update speed for depth streams
      enum:
        - 100ms
        - 250ms
        - 500ms
    assetSymbol:
      type: string
      description: Asset symbol for asset index (e.g., btcusd)
    
    # Control schemas
    subscribeRequest:
      type: object
      description: |
        Request to subscribe to one or more streams. Stream names should follow
        Binance naming conventions (lowercase, with @ separators).
        
        Supported stream patterns:
        - Symbol streams: {symbol}@{streamType} (e.g., "btcusdt@aggTrade")
        - All market streams: !{streamType}@arr (e.g., "!markPrice@arr")
        - Depth streams: {symbol}@depth{levels}{speed} (e.g., "btcusdt@depth5@100ms")
        - Kline streams: {symbol}@kline_{interval} (e.g., "btcusdt@kline_1m")
        - Continuous kline: {pair}_{contractType}@continuousKline_{interval}
        - Mark price: {symbol}@markPrice or !markPrice@arr
        - Liquidation: {symbol}@forceOrder or !forceOrder@arr
        - Asset index: {asset}@assetIndex or !assetIndex@arr
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: SUBSCRIBE
          description: Method name
        params:
          type: array
          description: Array of stream names to subscribe to
          items:
            type: string
            pattern: '^[a-zA-Z0-9!@._]+$'
          examples:
            - ["btcusdt@aggTrade"]
            - ["btcusdt@aggTrade", "btcusdt@depth5@100ms"]
            - ["!markPrice@arr"]
            - ["ethusdt@kline_1m", "btcusdt@miniTicker"]
            - ["BTCUSDT_PERPETUAL@continuousKline_1m"]
            - ["btcusdt@forceOrder", "!contractInfo"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 1

    unsubscribeRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: UNSUBSCRIBE
          description: Method name
        params:
          type: array
          description: Array of stream names to unsubscribe from
          items:
            type: string
          example: ["btcusdt@aggTrade"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 2

    subscriptionResponse:
      type: object
      properties:
        result:
          type: "null"
          description: Always null for successful subscription
        id:
          type: integer
          format: int64

    listSubscriptionsRequest:
      type: object
      required:
        - method
        - id
      properties:
        method:
          type: string
          const: LIST_SUBSCRIPTIONS
          description: Method name
        id:
          type: integer
          format: int64
          description: Request ID
          example: 3

    listSubscriptionsResponse:
      type: object
      properties:
        result:
          type: array
          description: Array of active stream names
          items:
            type: string
          example: ["btcusdt@aggTrade", "btcusdt@markPrice"]
        id:
          type: integer
          format: int64

    setPropertyRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: SET_PROPERTY
          description: Method name
        params:
          type: array
          description: Array containing property name and value
          items:
            oneOf:
              - type: string
              - type: boolean
          minItems: 2
          maxItems: 2
          example: ["combined", true]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 5

    setPropertyResponse:
      type: object
      properties:
        result:
          type: "null"
          description: Always null for successful property setting
        id:
          type: integer
          format: int64

    getPropertyRequest:
      type: object
      required:
        - method
        - params
        - id
      properties:
        method:
          type: string
          const: GET_PROPERTY
          description: Method name
        params:
          type: array
          description: Array containing property name to retrieve
          items:
            type: string
          minItems: 1
          maxItems: 1
          example: ["combined"]
        id:
          type: integer
          format: int64
          description: Request ID
          example: 6

    getPropertyResponse:
      type: object
      properties:
        result:
          oneOf:
            - type: boolean
            - type: string
          description: Property value (currently only 'combined' property supported)
        id:
          type: integer
          format: int64

    errorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: integer
              description: Error code
            msg:
              type: string
              description: Error message
        id:
          type: integer
          format: int64
          

    # Stream event schemas
    aggregateTradeEvent:
      type: object
      required:
        - e
        - E
        - s
        - a
        - p
        - q
        - f
        - l
        - T
        - m
      properties:
        e:
          type: string
          description: Event type
          const: aggTrade
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        a:
          type: integer
          format: int64
          description: Aggregate trade ID
          example: 12345
        p:
          type: string
          description: Price
          example: "16800.50000000"
        q:
          type: string
          description: Quantity
          example: "0.01234000"
        f:
          type: integer
          format: int64
          description: First trade ID
          example: 100
        l:
          type: integer
          format: int64
          description: Last trade ID
          example: 105
        T:
          type: integer
          format: int64
          description: Trade time
          example: 1672304050120
        m:
          type: boolean
          description: Is the buyer the market maker
          example: false

    markPriceEvent:
      type: object
      required:
        - e
        - E
        - s
        - p
        - P
        - i
        - r
        - T
      properties:
        e:
          type: string
          description: Event type
          const: markPriceUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        p:
          type: string
          description: Mark price
          example: "16800.50000000"
        P:
          type: string
          description: Estimated settle price (only for quarterly contract)
          example: "16800.50000000"
        i:
          type: string
          description: Index price
          example: "16800.40000000"
        r:
          type: string
          description: Funding rate
          example: "0.00010000"
        T:
          type: integer
          format: int64
          description: Next funding time
          example: 1672304400000
        
    allMarkPricesEvent:
      type: array
      description: Array of mark price updates for all symbols
      items:
        $ref: '#/components/schemas/markPriceEvent'

    klineEvent:
      type: object
      required:
        - e
        - E
        - s
        - k
      properties:
        e:
          type: string
          description: Event type
          const: kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - s
            - i
            - f
            - L
            - o
            - c
            - h
            - l
            - v
            - n
            - x
            - q
            - V
            - Q
            - B
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1672304040000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1672304099999
            s:
              type: string
              description: Symbol
              example: BTCUSDT
            i:
              type: string
              description: Interval
              example: 1m
            f:
              type: integer
              format: int64
              description: First trade ID
              example: 100
            L:
              type: integer
              format: int64
              description: Last trade ID
              example: 200
            o:
              type: string
              description: Open price
              example: "16800.00000000"
            c:
              type: string
              description: Close price
              example: "16805.00000000"
            h:
              type: string
              description: High price
              example: "16810.00000000"
            l:
              type: string
              description: Low price
              example: "16795.00000000"
            v:
              type: string
              description: Base asset volume
              example: "100.00000000"
            n:
              type: integer
              description: Number of trades
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false
            q:
              type: string
              description: Quote asset volume
              example: "1680500.00000000"
            V:
              type: string
              description: Taker buy base asset volume
              example: "60.00000000"
            Q:
              type: string
              description: Taker buy quote asset volume
              example: "1008300.00000000"
            B:
              type: string
              description: Ignore field
              example: "0"

    continuousKlineEvent:
      type: object
      required:
        - e
        - E
        - ps
        - ct
        - k
      properties:
        e:
          type: string
          description: Event type
          const: continuous_kline
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        ps:
          type: string
          description: Pair
          example: BTCUSDT
        ct:
          type: string
          description: Contract type
          example: PERPETUAL
        k:
          type: object
          description: Kline data
          required:
            - t
            - T
            - i
            - f
            - L
            - o
            - c
            - h
            - l
            - v
            - n
            - x
            - q
            - V
            - Q
            - B
          properties:
            t:
              type: integer
              format: int64
              description: Kline start time
              example: 1672304040000
            T:
              type: integer
              format: int64
              description: Kline close time
              example: 1672304099999
            i:
              type: string
              description: Interval
              example: 1m
            f:
              type: integer
              format: int64
              description: First trade ID
              example: 100
            L:
              type: integer
              format: int64
              description: Last trade ID
              example: 200
            o:
              type: string
              description: Open price
              example: "16800.00000000"
            c:
              type: string
              description: Close price
              example: "16805.00000000"
            h:
              type: string
              description: High price
              example: "16810.00000000"
            l:
              type: string
              description: Low price
              example: "16795.00000000"
            v:
              type: string
              description: Volume
              example: "100.00000000"
            n:
              type: integer
              description: Number of trades
              example: 100
            x:
              type: boolean
              description: Is this kline closed
              example: false
            q:
              type: string
              description: Quote asset volume
              example: "1680500.00000000"
            V:
              type: string
              description: Taker buy volume
              example: "60.00000000"
            Q:
              type: string
              description: Taker buy quote asset volume
              example: "1008300.00000000"
            B:
              type: string
              description: Ignore field
              example: "0"

    miniTickerEvent:
      type: object
      required:
        - e
        - E
        - s
        - c
        - o
        - h
        - l
        - v
        - q
      properties:
        e:
          type: string
          description: Event type
          const: 24hrMiniTicker
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        c:
          type: string
          description: Close price
          example: "16805.00000000"
        o:
          type: string
          description: Open price
          example: "16800.00000000"
        h:
          type: string
          description: High price
          example: "16810.00000000"
        l:
          type: string
          description: Low price
          example: "16795.00000000"
        v:
          type: string
          description: Total traded base asset volume
          example: "10000.00000000"
        q:
          type: string
          description: Total traded quote asset volume
          example: "168050000.00000000"

    allMiniTickersEvent:
      type: array
      description: Array of mini ticker updates for all symbols
      items:
        $ref: '#/components/schemas/miniTickerEvent'

    tickerEvent:
      type: object
      required:
        - e
        - E
        - s
        - p
        - P
        - w
        - c
        - Q
        - o
        - h
        - l
        - v
        - q
        - O
        - C
        - F
        - L
        - n
      properties:
        e:
          type: string
          description: Event type
          const: 24hrTicker
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        p:
          type: string
          description: Price change
          example: "5.00000000"
        P:
          type: string
          description: Price change percent
          example: "0.030"
        w:
          type: string
          description: Weighted average price
          example: "16802.50000000"
        c:
          type: string
          description: Last price
          example: "16805.00000000"
        Q:
          type: string
          description: Last quantity
          example: "0.01234000"
        o:
          type: string
          description: Open price
          example: "16800.00000000"
        h:
          type: string
          description: High price
          example: "16810.00000000"
        l:
          type: string
          description: Low price
          example: "16795.00000000"
        v:
          type: string
          description: Total traded base asset volume
          example: "10000.00000000"
        q:
          type: string
          description: Total traded quote asset volume
          example: "168050000.00000000"
        O:
          type: integer
          format: int64
          description: Statistics open time
          example: 1672217650123
        C:
          type: integer
          format: int64
          description: Statistics close time
          example: 1672304050123
        F:
          type: integer
          format: int64
          description: First trade ID
          example: 100
        L:
          type: integer
          format: int64
          description: Last trade ID
          example: 10000
        n:
          type: integer
          description: Total number of trades
          example: 9901

    allTickerEvent:
      type: array
      description: Array of ticker updates for all symbols
      items:
        $ref: '#/components/schemas/tickerEvent'

    bookTickerEvent:
      type: object
      required:
        - e
        - u
        - s
        - b
        - B
        - a
        - A
        - T
        - E
      properties:
        e:
          type: string
          description: Event type
          const: bookTicker
        u:
          type: integer
          format: int64
          description: Order book updateId
          example: 400900217
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        b:
          type: string
          description: Best bid price
          example: "16804.90000000"
        B:
          type: string
          description: Best bid quantity
          example: "5.00000000"
        a:
          type: string
          description: Best ask price
          example: "16805.10000000"
        A:
          type: string
          description: Best ask quantity
          example: "10.00000000"
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1672304050123
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123

    liquidationEvent:
      type: object
      required:
        - e
        - E
        - o
      properties:
        e:
          type: string
          description: Event type
          const: forceOrder
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        o:
          type: object
          description: Liquidation order
          required:
            - s
            - S
            - o
            - f
            - q
            - p
            - ap
            - X
            - l
            - z
            - T
          properties:
            s:
              type: string
              description: Symbol
              example: BTCUSDT
            S:
              type: string
              description: Side
              enum: [BUY, SELL]
              example: SELL
            o:
              type: string
              description: Order type
              const: LIMIT
            f:
              type: string
              description: Time in force
              const: IOC
            q:
              type: string
              description: Original quantity
              example: "0.01234000"
            p:
              type: string
              description: Price
              example: "16800.50000000"
            ap:
              type: string
              description: Average price
              example: "16800.50000000"
            X:
              type: string
              description: Order status
              const: FILLED
            l:
              type: string
              description: Last filled quantity
              example: "0.01234000"
            z:
              type: string
              description: Accumulated filled quantity
              example: "0.01234000"
            T:
              type: integer
              format: int64
              description: Trade time
              example: 1672304050120

    allLiquidationsEvent:
      type: array
      description: Array of liquidation orders for all symbols
      items:
        $ref: '#/components/schemas/liquidationEvent'

    partialDepthEvent:
      type: object
      required:
        - e
        - E
        - T
        - s
        - U
        - u
        - pu
        - b
        - a
      properties:
        e:
          type: string
          description: Event type
          const: depthUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1672304050120
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        U:
          type: integer
          format: int64
          description: First update ID in event
          example: 157
        u:
          type: integer
          format: int64
          description: Final update ID in event
          example: 160
        pu:
          type: integer
          format: int64
          description: Final update ID in last stream
          example: 156
        b:
          type: array
          description: Bids
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["16804.90000000", "5.00000000"], ["16804.80000000", "10.00000000"]]
        a:
          type: array
          description: Asks
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["16805.10000000", "10.00000000"], ["16805.20000000", "15.00000000"]]

    diffDepthEvent:
      type: object
      required:
        - e
        - E
        - T
        - s
        - U
        - u
        - pu
        - b
        - a
      properties:
        e:
          type: string
          description: Event type
          const: depthUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        T:
          type: integer
          format: int64
          description: Transaction time
          example: 1672304050120
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        U:
          type: integer
          format: int64
          description: First update ID in event
          example: 157
        u:
          type: integer
          format: int64
          description: Final update ID in event
          example: 160
        pu:
          type: integer
          format: int64
          description: Previous final update ID in event
          example: 156
        b:
          type: array
          description: Bids to be updated
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["16804.90000000", "0.00000000"]]
        a:
          type: array
          description: Asks to be updated
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
          example: [["16805.10000000", "10.00000000"]]

    compositeIndexEvent:
      type: object
      required:
        - e
        - E
        - s
        - p
        - C
        - c
      properties:
        e:
          type: string
          description: Event type
          const: compositeIndex
        E:
          type: integer
          format: int64
          description: Event time
          example: 1602310596000
        s:
          type: string
          description: Symbol
          example: DEFIUSDT
        p:
          type: string
          description: Price
          example: "554.41604065"
        C:
          type: string
          description: Asset type
          example: baseAsset
        c:
          type: array
          description: Composition
          items:
            type: object
            required:
              - b
              - q
              - w
              - W
              - i
            properties:
              b:
                type: string
                description: Base asset
                example: BAL
              q:
                type: string
                description: Quote asset
                example: USDT
              w:
                type: string
                description: Weight in quantity
                example: "1.04884844"
              W:
                type: string
                description: Weight in percentage
                example: "0.01457800"
              i:
                type: string
                description: Index price
                example: "24.33521021"

    contractInfoEvent:
      type: object
      required:
        - e
        - E
        - s
        - ps
        - ct
        - dt
        - ot
        - cs
        - bks
      properties:
        e:
          type: string
          description: Event type
          const: contractInfo
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: Symbol
          example: BTCUSDT
        ps:
          type: string
          description: Pair
          example: BTCUSDT
        ct:
          type: string
          description: Contract type
          example: PERPETUAL
        dt:
          type: integer
          format: int64
          description: Delivery date time
          example: 4133404800000
        ot:
          type: integer
          format: int64
          description: Onboard date time
          example: 1569398400000
        cs:
          type: string
          description: Contract status
          example: TRADING
        bks:
          type: array
          description: Bracket levels (only present when bracket updated)
          items:
            type: object
            required:
              - bs
              - bnf
              - bnc
              - mmr
              - cf
              - mi
              - ma
            properties:
              bs:
                type: integer
                description: Notional bracket
                example: 1
              bnf:
                type: integer
                description: Floor notional of this bracket
                example: 0
              bnc:
                type: integer
                description: Cap notional of this bracket
                example: 2500
              mmr:
                type: number
                description: Maintenance margin rate
                example: 0.004
              cf:
                type: integer
                description: Auxiliary number for quick calculation
                example: 0
              mi:
                type: integer
                description: Min leverage for this bracket
                example: 21
              ma:
                type: integer
                description: Max leverage for this bracket
                example: 50

    assetIndexEvent:
      type: object
      required:
        - e
        - E
        - s
        - i
        - b
        - a
        - B
        - A
        - q
        - g
        - Q
        - G
      properties:
        e:
          type: string
          description: Event type
          const: assetIndexUpdate
        E:
          type: integer
          format: int64
          description: Event time
          example: 1672304050123
        s:
          type: string
          description: asset index symbol
          example: BTCUSD
        i:
          type: string
          description: index price
          example: "16800.50000000"
        b:
          type: string
          description: bid buffer
          example: "16790.00000000"
        a:
          type: string
          description: ask buffer
          example: "16810.00000000"
        B:
          type: string
          description: bid rate
          example: "0.00500000"
        A:
          type: string
          description: ask rate
          example: "0.00500000"
        q:
          type: string
          description: auto exchange bid buffer
          example: "16785.00000000"
        g:
          type: string
          description: auto exchange ask buffer
          example: "16815.00000000"
        Q:
          type: string
          description: auto exchange bid rate
          example: "0.00750000"
        G:
          type: string
          description: auto exchange ask rate
          example: "0.00750000"
    allAssetIndexesEvent:
      type: array
      description: Array of asset index updates for all assets
      items:
        $ref: '#/components/schemas/assetIndexEvent'

    combinedMarketStreamsEvent:
      type: object
      description: |
        Wrapper for combined stream data. When connecting to combined streams,
        all events are wrapped with this structure to identify the source stream.
        
        The 'stream' field contains the original stream name, and 'data' contains
        the original event data that would be received from an individual stream.
      required:
        - stream
        - data
      properties:
        stream:
          type: string
          description: Original stream name that generated this event
          examples:
            - "btcusdt@aggTrade"
            - "btcusdt@depth5"
            - "btcusdt@markPrice"
            - "!markPrice@arr"
            - "BTCUSDT_PERPETUAL@continuousKline_1m"
            - "btcusdt@forceOrder"
            - "!contractInfo"
            - "btc@assetIndex"
            - "!miniTicker@arr"
            - "!ticker@arr"
            - "!forceOrder@arr"
            - "!assetIndex@arr"
        data:
          description: |
            Original stream event data (unwrapped). This is exactly the same data
            that would be received when connecting to the individual stream directly.
            The event type can be determined by examining the 'stream' field.
          oneOf:
            - $ref: '#/components/schemas/aggregateTradeEvent'
            - $ref: '#/components/schemas/markPriceEvent'
            - $ref: '#/components/schemas/allMarkPricesEvent'
            - $ref: '#/components/schemas/klineEvent'
            - $ref: '#/components/schemas/continuousKlineEvent'
            - $ref: '#/components/schemas/miniTickerEvent'
            - $ref: '#/components/schemas/allMiniTickersEvent'
            - $ref: '#/components/schemas/tickerEvent'
            - $ref: '#/components/schemas/allTickerEvent'
            - $ref: '#/components/schemas/bookTickerEvent'
            - $ref: '#/components/schemas/liquidationEvent'
            - $ref: '#/components/schemas/allLiquidationsEvent'
            - $ref: '#/components/schemas/partialDepthEvent'
            - $ref: '#/components/schemas/diffDepthEvent'
            - $ref: '#/components/schemas/compositeIndexEvent'
            - $ref: '#/components/schemas/contractInfoEvent'
            - $ref: '#/components/schemas/assetIndexEvent'
            - $ref: '#/components/schemas/allAssetIndexesEvent'
      example:
        stream: "btcusdt@aggTrade"
        data:
          e: "aggTrade"
          E: 1672304050123
          s: "BTCUSDT"
          a: 12345
          p: "16800.50000000"
          q: "0.01234000"
          f: 100
          l: 105
          T: 1672304050120
          m: false
